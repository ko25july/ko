(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"0ba1":function(t,e,a){"use strict";a("574d")},"10b3":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("JsonTable",{ref:"purchasesRef",attrs:{"base-url":this.$global.data.baseUrl,params:{uid:t.UID},query:"_embed=purchaseProducts&_expand=dealer&_expand=product&_expand=type&_expand=unit",table:"purchases",title:"⭐ รายการซื้อสินค้า ⭐",classes:t.settings.classes,columns:t.purchaseColumns,onInitAddData:t.onInitAddDataPurchases,onValidateData:t.onValidateDataPurchases,onAfterLoadData:t.onAfterLoadDataPurchases,onBeforeUpdateData:t.onBeforeUpdateDataPurchases,onAfterRemoveData:t.onAfterRemoveDataPurchases,rowsPerPage:5,selected:t.selectedRows,showSelectedRows:"",autoSelectRow:""},on:{"update:selected":[function(e){t.selectedRows=e},t.onSelectedRows]}}),a("JsonTable",{ref:"purchaseProductsRef",attrs:{id:"scrollToThis","base-url":this.$global.data.baseUrl,params:{uid:t.UID},title:"⭐ "+t.titlePurchaseProducts+" ⭐",classes:t.settings.classes,columns:t.purchaseProductColumns,onInitAddData:t.onInitAddData,onInitEditData:t.onInitEditData,onValidateData:t.onValidateData,onAfterLoadData:t.onAfterLoadData,rowsPerPage:0,showEditDialog:t.showEditDialog,hidePagination:"",hideRefreshButton:""},on:{"add-row":function(e,a){return t.onUpdateRow(e,a,void 0)},"update-row":function(e,a){return t.onUpdateRow(e,a,{})},"update-cell":function(e,a,i){return t.onUpdateRow(e,a,i)},"remove-row":function(e,a){return t.onRemoveRow(e,a)},"input-select":function(e,a){return t.onInputSelect(e,a)}},model:{value:t.purchaseProducts,callback:function(e){t.purchaseProducts=e},expression:"purchaseProducts"}}),a("q-page-sticky",{staticClass:"z-top",attrs:{position:"top-right",offset:[0,0]}},[a("q-btn",{staticClass:"q-ma-xs",attrs:{"fab-mini":"",glossy:"",round:"",icon:"print",color:"accent",size:"xs",disable:!t.selectedRow.total||t.selectedRow.total<=0},on:{click:function(){return t.printData()}}})],1),a("div",{staticClass:"q-pa-none fit row wrap justify-center items-center content-start",attrs:{id:"print"}},[t.selectedRow.id?a("div",{staticClass:"q-pa-none row wrap justify-center items-start content-start",staticStyle:{width:"780px",border:"1px solid black"},attrs:{id:"printBorder"}},[a("div",{staticClass:"q-pa-sm text-bold",staticStyle:{width:"722px","font-size":"larger"}},[a("div",{staticClass:"q-pa-none",attrs:{align:"center"}},[a("div",{staticClass:"text-h6",staticStyle:{"text-decoration":"underline"}},[t._v("\n            "+t._s(t.selectedRow.dealer.name||"ผู้จำหน่าย")+"\n          ")]),t.selectedRow.dealer.address?a("div",[t._v("\n            "+t._s(t.selectedRow.dealer.address)+"\n          ")]):t._e(),t.selectedRow.dealer.telephone?a("div",[t._v("\n            โทรศัพท์: "+t._s(t.selectedRow.dealer.telephone)+"\n          ")]):t._e(),a("div",{staticClass:"text-h6",staticStyle:{"text-decoration":"underline"}},[t._v("\n            บิลซื้อสินค้า\n          ")]),t.selectedRow.date?a("div",{attrs:{align:"center"}},[t._v("\n            "+t._s(new Date(t.selectedRow.date).toLocaleString("th-TH",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))+"\n          ")]):t._e(),t.settings?a("div",{attrs:{align:"left"}},[t.settings.name?a("div",[t._v("\n              นาม: "+t._s(t.settings.name)+"\n            ")]):t._e(),t.settings.address?a("div",[t._v("\n              ที่อยู่: "+t._s(t.settings.address)+"\n            ")]):t._e(),t.settings.telephone?a("div",[t._v("\n              โทรศัพท์: "+t._s(t.settings.telephone)+"\n            ")]):t._e()]):t._e()]),a("div",{staticClass:"q-pa-none"},[t._m(0),t._l((t.$refs.purchaseProductsRef||{}).data,(function(e){return a("div",{key:e.id,staticClass:"row"},[a("div",{staticClass:"col-1 text-center"},[t._v(t._s(e.quantity)+"\n              ")]),a("div",{staticClass:"q-px-xs col"},[t._v(t._s((e.product||{}).name))]),a("div",{staticClass:"col-auto text-right"},[t._v(t._s(((+e.price||0)-(+e.discount||0)).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))]),a("div",{staticClass:"col-3 text-right"},[t._v(t._s((((+e.price||0)-(+e.discount||0))*(+e.quantity||0)).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])])}))],2),a("div",{staticClass:"q-pa-xs"}),a("div",{staticClass:"q-pa-none"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col text-right"},[t._v("รวม:")]),a("div",{staticClass:"col text-right"},[t._v(" "+t._s(((t.$refs.purchaseProductsRef||{}).data||[]).reduce((function(t,e){return t+e.quantity}),0)))]),a("div",{staticClass:"col"},[t._v(" หน่วย")])]),a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col text-right"},[t._v("จาก:")]),a("div",{staticClass:"col text-right"},[t._v(" "+t._s(((t.$refs.purchaseProductsRef||{}).data||[]).length))]),a("div",{staticClass:"col"},[t._v(" รายการ")])])]),a("div",{staticClass:"col-7"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("รวมเงิน:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "+t._s((+t.selectedRow.total||0).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])]),t.selectedRow.discount?a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("ส่วนลด:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "+t._s((+t.selectedRow.discount||0).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])]):t._e(),t.selectedRow.vat?a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("ภาษี:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "+t._s((((+t.selectedRow.total||0)-(+t.selectedRow.discount||0))*(+t.selectedRow.vat||0)/100).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])]):t._e(),a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("รวมสุทธิ:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "),a("span",{staticStyle:{"text-decoration":"underline"}},[t._v(t._s(((+t.selectedRow.total||0)-(+t.selectedRow.discount||0)+((+t.selectedRow.total||0)-(+t.selectedRow.discount||0))*(+t.selectedRow.vat||0)/100).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])])]),t.selectedRow.cash?a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("ชำระเงิน:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "+t._s((+t.selectedRow.cash||0).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])]):t._e(),t.selectedRow.cash?a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("ทอนเงิน:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "+t._s((+t.selectedRow.cash?+t.selectedRow.cash-((+t.selectedRow.total||0)-(+t.selectedRow.discount||0)+((+t.selectedRow.total||0)-(+t.selectedRow.discount||0))*(+t.selectedRow.vat||0)/100):0).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])]):t._e()])])]),t._m(1)])]):t._e()]),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.cashDialog,callback:function(e){t.cashDialog=e},expression:"cashDialog"}},[a("q-card",{style:t.dialogStyle},[a("q-card-section",{staticClass:"q-pa-none",staticStyle:{cursor:"grab","min-width":"500px"}},[a("q-bar",{directives:[{name:"touch-pan",rawName:"v-touch-pan.mouse",value:t.onPanDialog,expression:"onPanDialog",modifiers:{mouse:!0}}],staticClass:"bg-primary text-white"},[a("div",[t._v(t._s(t.titlePurchaseProducts))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1)],1),a("q-card-section",[a("div",{staticClass:"q-pa-md"},[a("q-input",{staticClass:"no-spin-button",attrs:{type:"number",autofocus:"",counter:"",debounce:"500",label:"ชำระเงิน","input-class":"text-right text-h3",rules:[function(t){return t>=0||"ข้อมูลต้องมีค่ามากกว่าหรือเท่ากับ 0"}]},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),function(){return t.cashValue>0&&t.selectedRow.id&&t.updateCashPurchases(t.selectedRow)}())},focus:function(t){return t&&t.target&&"function"===typeof t.target.select&&t.target.select()}},model:{value:t.cashValue,callback:function(e){t.cashValue=t._n(e)},expression:"cashValue"}}),a("q-input",{attrs:{value:(+t.selectedRow.net||0).toFixed(this.settings.fractionDigits),type:"text",readonly:"",label:"ราคาสุทธิ","input-class":"text-right text-h3"}}),a("q-input",{attrs:{value:(t.cashValue>(+t.selectedRow.net||0)?t.cashValue-(+t.selectedRow.net||0):0).toFixed(this.settings.fractionDigits),type:"text",readonly:"",label:"ทอนเงิน","input-class":"text-right text-h3"}})],1)]),a("q-card-section",[a("q-separator"),a("div",{staticClass:"q-pa-md q-gutter-md row justify-between"},[a("q-btn",{attrs:{glossy:"",color:"grey",label:"1000"},on:{click:function(e,a){return t.cashValueThrottle(1e3)}}}),a("q-btn",{attrs:{glossy:"",color:"purple",label:"500"},on:{click:function(e,a){return t.cashValueThrottle(500)}}}),a("q-btn",{attrs:{glossy:"",color:"red",label:"100"},on:{click:function(e,a){return t.cashValueThrottle(100)}}}),a("q-btn",{attrs:{glossy:"",color:"blue",label:"50"},on:{click:function(e,a){return t.cashValueThrottle(50)}}}),a("q-btn",{attrs:{glossy:"",color:"green",label:"20"},on:{click:function(e,a){return t.cashValueThrottle(20)}}})],1),a("q-separator"),a("div",{staticClass:"q-pa-md q-gutter-md row justify-between"},[a("q-btn",{attrs:{round:"",glossy:"",color:"yellow-10",label:"10"},on:{click:function(e,a){return t.cashValueThrottle(10)}}}),a("q-btn",{attrs:{round:"",glossy:"",color:"yellow-9",label:"5"},on:{click:function(e,a){return t.cashValueThrottle(5)}}}),a("q-btn",{attrs:{round:"",glossy:"",color:"yellow-8",label:"2"},on:{click:function(e,a){return t.cashValueThrottle(2)}}}),a("q-btn",{attrs:{round:"",glossy:"",color:"yellow-7",label:"1"},on:{click:function(e,a){return t.cashValueThrottle(1)}}})],1),a("q-separator")],1),a("q-card-actions",{staticClass:"q-pa-md",attrs:{align:"evenly"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"ย้อนกลับไป"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"secondary",label:"รับเงิน ไม่พิมพ์",disable:t.cashValue<=0||t.cashValue<(+t.selectedRow.net||0)},on:{click:function(e,a){return t.cashValue>0&&t.selectedRow.id&&t.updateCashPurchases(t.selectedRow,!1)}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"positive",label:"รับเงิน และพิมพ์",disable:t.cashValue<=0||t.cashValue<(+t.selectedRow.net||0)},on:{click:function(e,a){return t.cashValue>0&&t.selectedRow.id&&t.updateCashPurchases(t.selectedRow)}}})],1)],1)],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",staticStyle:{"text-decoration":"underline"}},[a("div",{staticClass:"col-1 text-center"},[t._v("จำนวน")]),a("div",{staticClass:"col text-center"},[t._v("รายการ")]),a("div",{staticClass:"col-auto text-right"},[t._v("ราคา")]),a("div",{staticClass:"col-3 text-right"},[t._v("รวม")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-none",attrs:{align:"center"}},[a("div",{staticClass:"text-h6"},[t._v("\n            ขอบคุณที่ใช้บริการ\n          ")])])}],n=(a("99af"),a("7db0"),a("4160"),a("caad"),a("e260"),a("13d5"),a("b0c0"),a("b680"),a("cca6"),a("d3b7"),a("e6cf"),a("ac1f"),a("2532"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("ec67")),o=a("1732"),r=a("e302"),l={name:"PagePurchases",data:function(){return{purchaseColumns:[{name:"id",label:"รหัสซื้อ",field:"id",sortable:!0,edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"date",label:"วัน/เดือน/ปี เวลา",field:"date",format:function(t,e){return"".concat(new Date(t).toLocaleString())},sortable:!0,classes:"text-green-10 text-center",edit:{type:"datetime",inputClass:"",prefix:"",suffix:""}},{name:"dealerId",label:"ผู้จำหน่าย",field:"dealerId",sortable:!0,classes:"text-green-10 text-left",edit:{type:"number",inputClass:"",prefix:"",suffix:""}},{name:"discount",label:"ส่วนลด",field:"discount",sortable:!0,classes:"text-green-10",edit:{type:"decimal",inputClass:"",prefix:"",suffix:""}},{name:"vat",label:"ภาษี",field:"vat",sortable:!0,classes:"text-green-10",edit:{type:"number",inputClass:"",prefix:"",suffix:"%"}},{name:"total",label:"รวม",field:"total",sortable:!0,edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"net",label:"รวมสุทธิ",field:"net",sortable:!0,headerClasses:"text-weight-bold",classes:"text-weight-bold",edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"cash",label:"ชำระเงิน",field:"cash",sortable:!0,classes:"text-green-10",edit:{type:"decimal",inputClass:"",prefix:"",suffix:""}},{name:"change",label:"ทอนเงิน",field:"change",sortable:!0,edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],purchaseProductColumns:[{name:"product.id",label:"รหัสสินค้า",field:function(t){return(t.product||{}).id},sortable:!0,edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"product.type.name",label:"ประเภทสินค้า",field:function(t){return(t.product||{type:{}}).type.name},sortable:!0,classes:"text-center",edit:{type:"text",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"product.unit.name",label:"หน่วยนับ",field:function(t){return(t.product||{unit:{}}).unit.name},sortable:!0,classes:"text-center",edit:{type:"text",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"productId",label:"ชื่อสินค้า",field:"productId",sortable:!0,classes:"text-left",edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"price",label:"ราคาซื้อ",field:"price",sortable:!0,classes:"text-green-10",edit:{type:"decimal",inputClass:"",prefix:"",suffix:""}},{name:"discount",label:"ส่วนลด",field:"discount",sortable:!0,classes:"text-green-10",edit:{type:"decimal",inputClass:"",prefix:"",suffix:""}},{name:"price.discount",label:"ราคาทุน",field:function(t){return(t.price||0)-(t.discount||0)},sortable:!0,edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"quantity",label:"จำนวน",field:"quantity",sortable:!0,classes:"text-green-10",edit:{type:"number",inputClass:"",prefix:"",suffix:""}},{name:"total",label:"ราคารวม",field:function(t){return((t.price||0)-(t.discount||0))*(t.quantity||0)},sortable:!0,classes:"text-weight-bold",edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"sale",label:"ราคาขาย",field:"sale",sortable:!0,classes:"text-green-10",edit:{type:"decimal",inputClass:"",prefix:"",suffix:""}},{name:"product.quantity",label:"คงเหลือ",field:function(t){return(t.product||{}).quantity||0},sortable:!0,classes:"text-weight-bold",edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],titlePurchaseProducts:"ซื้อสินค้า",purchaseProducts:[],selectedRows:[],selectedRow:{},isRequireLoadDataPurchases:!1,isRequireLoadDataPurchaseProducts:!1,showEditDialog:!1,cashDialog:!1,cashValue:0,dialogPos:{x:0,y:0}}},components:{JsonTable:n["a"]},beforeCreate:function(){var t=this;this.UID=Object(o["a"])(),this.cashValueThrottle=Object(r["a"])((function(e){t.cashValue+=e}),500)},computed:{settings:{get:function(){return this.$global.data.settings||{}}},dialogStyle:function(){return{transform:"translate(".concat(this.dialogPos.x,"px, ").concat(this.dialogPos.y,"px)")}}},watch:{"$global.data.modify":function(t,e){if(t.request&&t.request.query&&t.request.query.uid!==this.UID){var a=t.request.path.split("/");(a.includes("purchases")||a.includes("purchaseProducts")||a.includes("products"))&&(this.$global.data.panelModel===this.$options.name?this.$refs.purchasesRef.onRequest():this.isRequireLoadDataPurchases||(this.isRequireLoadDataPurchases=!0))}},"$global.data.panelModel":function(t,e){t===this.$options.name&&this.isRequireLoadDataPurchases&&(this.isRequireLoadDataPurchases=!1,this.$refs.purchasesRef.onRequest())}},methods:{onInitAddDataPurchases:function(t){t.date=(new Date).toISOString(),t.discount=0,t.vat=this.settings.vatPurchase,t.cash=0,t.dealerId||(t.dealerId=(this.selectedRow||{}).dealerId?this.selectedRow.dealerId:1)},onValidateDataPurchases:function(t,e,a){return"dealerId"===e.name&&t<=0?"ยังไม่ได้กำหนดข้อมูลผู้จำหน่าย":"text"===e.edit.type||"textarea"===e.edit.type||"date"===e.edit.type?!!t||"ยังไม่ได้กำหนดข้อมูล":"number"!==e.edit.type&&"decimal"!==e.edit.type||(t>=0||"ข้อมูลต้องมีค่ามากกว่าหรือเท่ากับ 0")},onAfterLoadDataPurchases:function(t,e){e.forEach((function(t){t.net=((t.total||0)-(t.discount||0))*(100+(t.vat||0))/100,(t.total<=0||t.net<0)&&(t.net=0)})),document.activeElement.blur()},onBeforeUpdateDataPurchases:function(t,e){e.date=e.date||(new Date).toISOString(),e.change=e.cash-((e.total||0)-(e.discount||0))*(100+(e.vat||0))/100,delete e.net,(e.cash<=0||e.total<=0||e.change<0)&&(e.change=0)},onAfterRemoveDataPurchases:function(t,e,a){var i=this;a&&a.__deleted__&&a.__deleted__.purchaseProducts&&a.__deleted__.purchaseProducts.forEach((function(t){i.updateQuantityProduct({productId:t.productId,quantity:0,__:{quantity:t.quantity}})}))},onSelectedRows:function(t){t.length>0?(this.selectedRow=t[0],this.purchaseProducts=this.selectedRow.purchaseProducts,this.titlePurchaseProducts="ซื้อสินค้า ".concat((this.selectedRow.dealer||{}).name," [").concat(this.selectedRow.id,"]")):(this.selectedRow={},this.purchaseProducts=[],this.titlePurchaseProducts="ซื้อสินค้า"),document.activeElement.blur()},onAfterLoadData:function(t,e){if(e.forEach((function(t){return t.__=Object.assign({},t.__,{quantity:t.quantity})})),this.onAfterLoadData.row){var a={product:this.onAfterLoadData.row,productId:this.onAfterLoadData.row.id};if(delete this.onAfterLoadData.row,this.onInitAddData(a))return;this.onUpdateRow("",a,{})}document.activeElement.blur()},onInitAddData:function(t){if(!this.selectedRow.id)return this.$q.notify({type:"warning",message:"ยังไม่ได้เลือกรายการซื้อสินค้า"}),this.showEditDialog=!1,!0;t.purchaseId=this.selectedRow.id,t.quantity=+this.settings.quantityPurchase,t.discount=0,t.sale=+((t.product||{}).price||0),t.__=Object.assign({},t.__,{quantity:0})},onInitEditData:function(t){if(!this.selectedRow.id)return this.$q.notify({type:"warning",message:"ยังไม่ได้เลือกรายการซื้อสินค้า"}),this.showEditDialog=!1,!0;t.purchaseId=this.selectedRow.id,t.__=Object.assign({},t.__,{quantity:t.quantity})},onValidateData:function(t,e,a){return"productId"===e.name&&t<=0?"ยังไม่ได้กำหนดข้อมูลสินค้า":"quantity"===e.name&&t<=0?"จำนวนสินค้าต้องมีค่ามากกว่า 0":"text"===e.edit.type||"textarea"===e.edit.type||"date"===e.edit.type?!!t||"ยังไม่ได้กำหนดข้อมูล":"number"!==e.edit.type&&"decimal"!==e.edit.type||(t>=0||"ข้อมูลต้องมีค่ามากกว่าหรือเท่ากับ 0")},onUpdateRow:function(t,e,a){var i=this;if(e&&e.productId&&e.product){this.$q.loading.show(),e.sale=e.sale||Math.round(e.price-e.discount+(e.price-e.discount)*this.settings.profit/100);var s={purchaseId:e.purchaseId,productId:e.productId,price:e.price,discount:e.discount,sale:e.sale};if(!0!==this.onValidateData(e.quantity,{edit:{},name:"quantity"},e))return this.$q.loading.hide();var n=this.$refs.purchaseProductsRef.data.find((function(t){return t.productId===e.productId}));n?(Object.assign(s,{quantityDelta:a?e.quantity-e.__.quantity:e.quantity}),this.$jsonFetch.patch("".concat(this.$global.data.baseUrl,"/purchaseProducts/").concat(n.id),s,{params:{uid:this.UID}}).then((function(t){i.updateTotalPurchasesAndQuantityProduct(e).then((function(){i.$q.notify({type:"positive",message:"".concat((e.product||{}).name," ได้แก้ไขเรียบร้อยแล้ว")})})).catch((function(t){}))})).catch((function(t){}))):(Object.assign(s,{quantity:e.quantity}),this.$jsonFetch.post("".concat(this.$global.data.baseUrl,"/purchaseProducts"),s,{params:{uid:this.UID}}).then((function(t){i.updateTotalPurchasesAndQuantityProduct(e).then((function(){i.$q.notify({type:"positive",message:"".concat((e.product||{}).name," ได้เพิ่มเรียบร้อยแล้ว")})})).catch((function(t){}))})).catch((function(t){})))}},updateTotalPurchasesAndQuantityProduct:function(t){var e=this;return this.$refs.purchaseProductsRef.setShowEditDialog(!1),Promise.all([this.updateTotalPurchases(t),this.updateQuantityProduct(t)]).then((function(){return e.$refs.purchasesRef.onRequest()}))},updateTotalPurchases:function(t){var e=this;return new Promise((function(a,i){e.$jsonFetch.get("".concat(e.$global.data.baseUrl,"/purchaseProducts?purchaseId=").concat(t.purchaseId),{params:{uid:e.UID}}).then((function(s){var n={total:+s.data.reduce((function(t,e){return t+(e.price-e.discount)*e.quantity}),0).toFixed(e.settings.fractionDigits)};e.$jsonFetch.patch("".concat(e.$global.data.baseUrl,"/purchases/").concat(t.purchaseId),n,{params:{uid:e.UID}}).then((function(t){a(t.data)})).catch((function(t){i(t)}))})).catch((function(t){i(t)}))}))},updateQuantityProduct:function(t){var e=this;return new Promise((function(a,i){var s={quantityDelta:+t.quantity-+t.__.quantity};t.sale&&(s.cost=t.price-t.discount,s.price=t.sale),e.$jsonFetch.patch("".concat(e.$global.data.baseUrl,"/products/").concat(t.productId),s,{params:{uid:e.UID}}).then((function(t){a(t.data)})).catch((function(t){i(t)}))}))},updateCashPurchases:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(i,s){e.$q.loading.show(),e.cashDialog=!1,t.cash=e.cashValue;var n={cash:t.cash,change:t.cash-((t.total||0)-(t.discount||0))*(100+(t.vat||0))/100};(t.cash<=0||t.total<=0||n.change<0)&&(n.change=0),e.$jsonFetch.patch("".concat(e.$global.data.baseUrl,"/purchases/").concat(t.id),n,{params:{uid:e.UID}}).then((function(t){i(t.data),e.$refs.purchasesRef.onRequest(),a&&(e.printBorderVisibility(!1),e.$global.print("#print",e.settings.name,(function(){return e.printBorderVisibility(!0)})))})).catch((function(t){s(t)}))}))},onRemoveRow:function(t,e){var a=this;e&&e.id&&this.$q.dialog({title:"การลบข้อมูล",message:"กรุณายืนยันการลบข้อมูลของ ".concat(e.name||""," (รหัส ").concat(e.id,") ?"),ok:{glossy:!0,push:!0,color:"negative",label:"ยืนยันการลบ"},cancel:{glossy:!0,push:!0,color:"primary",label:"ยกเลิก"},focus:"cancel"}).onOk((function(){a.$q.loading.show(),e.quantity=0,a.$jsonFetch.delete("".concat(a.$global.data.baseUrl,"/purchaseProducts/").concat(e.id),void 0,{params:{uid:a.UID}}).then((function(t){a.updateTotalPurchasesAndQuantityProduct(e).then((function(){a.$q.notify({type:"positive",message:"".concat((e.product||{}).name," ได้ลบเรียบร้อยแล้ว")})})).catch((function(t){}))})).catch((function(t){}))}))},onInputSelect:function(t,e){"productId"===t.name&&("undefined"!==typeof e.sale&&(e.sale=e.product.price),this.$q.notify({type:"positive",icon:"info",caption:"สินค้า: ".concat(e.product.name),message:"ราคาขาย: ".concat(e.product.price," บาท/").concat(e.product.unit.name)}))},getDecimal:function(t){return(+t||0).toLocaleString(void 0,{minimumFractionDigits:this.settings.fractionDigits,maximumFractionDigits:this.settings.fractionDigits})},printData:function(){var t=this;this.selectedRow.cash?(this.printBorderVisibility(!1),this.$global.print("#print",this.settings.name,(function(){return t.printBorderVisibility(!0)}))):(this.cashDialog=!0,this.cashValue=this.selectedRow.net)},printBorderVisibility:function(t){document.getElementById("printBorder").style.borderColor=t?"black":"transparent"},addProductAutomate:function(t){var e=this;this.onAfterLoadData.row=t,!this.selectedRow.id||this.selectedRow.cash?this.$refs.purchasesRef.data.length<=0||this.$refs.purchasesRef.data[0].cash?this.$refs.purchasesRef.updateRow(this.$refs.purchasesRef.addRow(!1)):(this.selectedRows=[this.$refs.purchasesRef.data[0]],this.$nextTick((function(){return e.onAfterLoadData(void 0,[])}))):this.onAfterLoadData(void 0,[])},onPanDialog:function(t){this.dialogPos={x:this.dialogPos.x+t.delta.x,y:this.dialogPos.y+t.delta.y}},_debug:function(){var t;(t=console).log.apply(t,arguments)}}},c=l,d=(a("0ba1"),a("2877")),u=a("de5e"),p=a("9c40"),f=a("24e8"),h=a("f09f"),m=a("a370"),g=a("d847"),b=a("2c91"),y=a("27f9"),v=a("eb85"),x=a("4b7e"),w=a("75c3"),q=a("7f67"),_=a("eebe"),D=a.n(_),C=Object(d["a"])(c,i,s,!1,null,"45ee1184",null);e["a"]=C.exports;D()(C,"components",{QPageSticky:u["a"],QBtn:p["a"],QDialog:f["a"],QCard:h["a"],QCardSection:m["a"],QBar:g["a"],QSpace:b["a"],QInput:y["a"],QSeparator:v["a"],QCardActions:x["a"]}),D()(C,"directives",{TouchPan:w["a"],ClosePopup:q["a"]})},"3cb8":function(t,e,a){},"3d07":function(t,e,a){"use strict";a("3cb8")},"3eb8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"column"},[a("q-card",{staticClass:"fit",staticStyle:{background:"radial-gradient(circle, #44ccff 0%, #4466aa 100%)"}},[a("q-card-section",{staticClass:"q-pa-md fit row wrap justify-center"},[a("q-input",{staticClass:"q-px-md",attrs:{type:"date",dense:"","stack-label":"",label:"เริ่มจากวันที่"},on:{focus:function(e){return t.selectOnFocus(e)}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),a("q-input",{staticClass:"q-px-md",attrs:{type:"date",dense:"","stack-label":"",label:"ไปจนถึงวันที่"},on:{focus:function(e){return t.selectOnFocus(e)}},model:{value:t.stopDate,callback:function(e){t.stopDate=e},expression:"stopDate"}}),a("q-btn",{attrs:{glossy:"",rounded:"",icon:"grade",color:"pink",size:"md",label:"แสดงข้อมูล"},on:{click:function(){return t.getSummary()}}})],1),a("q-card-section",{staticClass:"q-pa-xs"},[a("q-separator")],1),a("q-card-section",{staticClass:"q-gutter-md fit row wrap justify-evenly items-start content-start"},[a("div",{staticClass:"q-pa-md rounded-borders text-h6 bg-light-green"},[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-center",staticStyle:{"text-decoration":"underline"},attrs:{colspan:"100%"}},[t._v("สรุปยอดขาย")])]),a("tr",[a("td",{staticClass:"text-left",staticStyle:{"min-width":"300px"}},[t._v("ขายสินค้า")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.netSale.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-left"},[t._v("ทุนสินค้า")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.costSale.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-left"},[t._v("กำไรที่ได้มา")]),a("td",{staticClass:"text-right"},[t._v(t._s((t.netSale-t.costSale).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"text-decoration":"underline"},attrs:{colspan:"100%"}},[t._v("สินค้าขายดี")])]),a("tr",[a("td",{staticClass:"text-left",staticStyle:{"min-width":"300px"}},[t._v(t._s(t.nameTotalSale1))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxTotalSale1.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-left"},[t._v(t._s(t.nameTotalSale2))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxTotalSale2.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-left"},[t._v(t._s(t.nameTotalSale3))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxTotalSale3.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"text-decoration":"underline"},attrs:{colspan:"100%"}},[t._v("สินค้าขายมาก")])]),a("tr",[a("td",{staticClass:"text-left",staticStyle:{"min-width":"300px"}},[t._v(t._s(t.nameQuantitySale1))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxQuantitySale1.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v(t._s(t.nameUnitSale1))])]),a("tr",[a("td",{staticClass:"text-left"},[t._v(t._s(t.nameQuantitySale2))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxQuantitySale2.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v(t._s(t.nameUnitSale2))])]),a("tr",[a("td",{staticClass:"text-left"},[t._v(t._s(t.nameQuantitySale3))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxQuantitySale3.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v(t._s(t.nameUnitSale3))])])])])]),a("div",{staticClass:"q-pa-md rounded-borders text-h6 bg-orange-4"},[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-center",staticStyle:{"text-decoration":"underline"},attrs:{colspan:"100%"}},[t._v("สรุปยอดซื้อ")])]),a("tr",[a("td",{staticClass:"text-left",staticStyle:{"min-width":"300px"}},[t._v("ซื้อสินค้า")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.netPurchase.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-left"},[t._v("ขายสินค้า")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.salePurchase.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-left"},[t._v("กำไรที่จะได้")]),a("td",{staticClass:"text-right"},[t._v(t._s((t.salePurchase-t.netPurchase).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"text-decoration":"underline"},attrs:{colspan:"100%"}},[t._v("สินค้าซื้อบ่อย")])]),a("tr",[a("td",{staticClass:"text-left",staticStyle:{"min-width":"300px"}},[t._v(t._s(t.nameTotalPurchase1))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxTotalPurchase1.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-left"},[t._v(t._s(t.nameTotalPurchase2))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxTotalPurchase2.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-left"},[t._v(t._s(t.nameTotalPurchase3))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxTotalPurchase3.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v("บาท")])]),a("tr",[a("td",{staticClass:"text-center",staticStyle:{"text-decoration":"underline"},attrs:{colspan:"100%"}},[t._v("สินค้าซื้อมาก")])]),a("tr",[a("td",{staticClass:"text-left",staticStyle:{"min-width":"300px"}},[t._v(t._s(t.nameQuantityPurchase1))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxQuantityPurchase1.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v(t._s(t.nameUnitPurchase1))])]),a("tr",[a("td",{staticClass:"text-left"},[t._v(t._s(t.nameQuantityPurchase2))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxQuantityPurchase2.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v(t._s(t.nameUnitPurchase2))])]),a("tr",[a("td",{staticClass:"text-left"},[t._v(t._s(t.nameQuantityPurchase3))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.maxQuantityPurchase3.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})))]),a("td",{staticClass:"text-left"},[t._v(t._s(t.nameUnitPurchase3))])])])])])])],1)],1)])},s=[],n=(a("99af"),a("7db0"),a("4160"),a("e260"),a("13d5"),a("b0c0"),a("d3b7"),a("e6cf"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("1732")),o={name:"PageSummary",data:function(){return{startDate:(new Date).toISOString().split("T")[0],stopDate:(new Date).toISOString().split("T")[0],costSale:0,netSale:0,salePurchase:0,netPurchase:0,maxTotalSale1:0,maxTotalSale2:0,maxTotalSale3:0,maxQuantitySale1:0,maxQuantitySale2:0,maxQuantitySale3:0,maxTotalPurchase1:0,maxTotalPurchase2:0,maxTotalPurchase3:0,maxQuantityPurchase1:0,maxQuantityPurchase2:0,maxQuantityPurchase3:0,nameTotalSale1:"",nameTotalSale2:"",nameTotalSale3:"",nameQuantitySale1:"",nameQuantitySale2:"",nameQuantitySale3:"",nameUnitSale1:"หน่วย",nameUnitSale2:"หน่วย",nameUnitSale3:"หน่วย",nameTotalPurchase1:"",nameTotalPurchase2:"",nameTotalPurchase3:"",nameQuantityPurchase1:"",nameQuantityPurchase2:"",nameQuantityPurchase3:"",nameUnitPurchase1:"หน่วย",nameUnitPurchase2:"หน่วย",nameUnitPurchase3:"หน่วย"}},beforeCreate:function(){this.UID=Object(n["a"])()},computed:{settings:{get:function(){return this.$global.data.settings||{}}}},methods:{getSummary:function(){var t=this,e=this.startDate.split("T")[0]+"T00:00:00.000Z",a=this.stopDate.split("T")[0]+"T23:59:59.999Z";this.$q.loading.show();var i=0,s=0,n=0,o=0,r=0,l=0,c=0,d=0,u=0,p=0,f=0,h=0;Promise.all([this.$jsonFetch.get("".concat(this.$global.data.baseUrl,"/sales?_embed=saleProducts&date_gte=").concat(e,"&date_lte=").concat(a),{params:{uid:this.UID}}).then((function(e){var a=0,c=0,d=0,u=0,p=0,f=0,h=0,m=0,g={},b={};for(var y in e.data.forEach((function(t){a+=t.saleProducts.reduce((function(t,e){return g[e.productId]=(g[e.productId]||0)+(e.price-e.discount)*e.quantity,b[e.productId]=(b[e.productId]||0)+e.quantity,t+(e.cost||0)*(e.quantity||0)}),0),c+=(t.cash||0)-(t.change||0)})),g){var v=g[y];v>d?(d=v,i=+y):v>u&&v<d?(u=v,s=+y):v>p&&v<u&&(p=v,n=+y)}for(var x in b){var w=b[x];w>f?(f=w,o=+x):w>h&&w<f?(h=w,r=+x):w>m&&w<h&&(m=w,l=+x)}t.costSale=a,t.netSale=c,t.maxTotalSale1=d,t.maxTotalSale2=u,t.maxTotalSale3=p,t.maxQuantitySale1=f,t.maxQuantitySale2=h,t.maxQuantitySale3=m})).catch((function(t){})),this.$jsonFetch.get("".concat(this.$global.data.baseUrl,"/purchases?_embed=purchaseProducts&date_gte=").concat(e,"&date_lte=").concat(a),{params:{uid:this.UID}}).then((function(e){var a=0,i=0,s=0,n=0,o=0,r=0,l=0,m=0,g={},b={};for(var y in e.data.forEach((function(t){a+=t.purchaseProducts.reduce((function(t,e){return g[e.productId]=(g[e.productId]||0)+(e.price-e.discount)*e.quantity,b[e.productId]=(b[e.productId]||0)+e.quantity,t+(e.sale||0)*(e.quantity||0)}),0),i+=(t.cash||0)-(t.change||0)})),g){var v=g[y];v>s?(s=v,c=+y):v>n&&v<s?(n=v,d=+y):v>o&&v<n&&(o=v,u=+y)}for(var x in b){var w=b[x];w>r?(r=w,p=+x):w>l&&w<r?(l=w,f=+x):w>m&&w<l&&(m=w,h=+x)}t.salePurchase=a,t.netPurchase=i,t.maxTotalPurchase1=s,t.maxTotalPurchase2=n,t.maxTotalPurchase3=o,t.maxQuantityPurchase1=r,t.maxQuantityPurchase2=l,t.maxQuantityPurchase3=m})).catch((function(t){}))]).then((function(){return t.$jsonFetch.get("".concat(t.$global.data.baseUrl,"/products?_expand=unit&id=").concat(i,"&id=").concat(s,"&id=").concat(n,"&id=").concat(o,"&id=").concat(r,"&id=").concat(l,"&id=").concat(c,"&id=").concat(d,"&id=").concat(u,"&id=").concat(p,"&id=").concat(f,"&id=").concat(h),{params:{uid:t.UID}}).then((function(e){t.nameTotalSale1=(e.data.find((function(t){return t.id===i}))||{}).name||"",t.nameTotalSale2=(e.data.find((function(t){return t.id===s}))||{}).name||"",t.nameTotalSale3=(e.data.find((function(t){return t.id===n}))||{}).name||"",t.nameQuantitySale1=(e.data.find((function(t){return t.id===o}))||{}).name||"",t.nameQuantitySale2=(e.data.find((function(t){return t.id===r}))||{}).name||"",t.nameQuantitySale3=(e.data.find((function(t){return t.id===l}))||{}).name||"",t.nameUnitSale1=((e.data.find((function(t){return t.id===o}))||{}).unit||{}).name||"หน่วย",t.nameUnitSale2=((e.data.find((function(t){return t.id===r}))||{}).unit||{}).name||"หน่วย",t.nameUnitSale3=((e.data.find((function(t){return t.id===l}))||{}).unit||{}).name||"หน่วย",t.nameTotalPurchase1=(e.data.find((function(t){return t.id===c}))||{}).name||"",t.nameTotalPurchase2=(e.data.find((function(t){return t.id===d}))||{}).name||"",t.nameTotalPurchase3=(e.data.find((function(t){return t.id===u}))||{}).name||"",t.nameQuantityPurchase1=(e.data.find((function(t){return t.id===p}))||{}).name||"",t.nameQuantityPurchase2=(e.data.find((function(t){return t.id===f}))||{}).name||"",t.nameQuantityPurchase3=(e.data.find((function(t){return t.id===h}))||{}).name||"",t.nameUnitPurchase1=((e.data.find((function(t){return t.id===p}))||{}).unit||{}).name||"หน่วย",t.nameUnitPurchase2=((e.data.find((function(t){return t.id===f}))||{}).unit||{}).name||"หน่วย",t.nameUnitPurchase3=((e.data.find((function(t){return t.id===h}))||{}).unit||{}).name||"หน่วย",t.$q.loading.hide()})).catch((function(e){t.$q.loading.hide()}))})).catch((function(e){t.$q.loading.hide()}))},selectOnFocus:function(t){t&&t.target&&"function"===typeof t.target.select&&t.target.select()},_debug:function(){var t;(t=console).log.apply(t,arguments)}}},r=o,l=a("2877"),c=a("f09f"),d=a("a370"),u=a("27f9"),p=a("9c40"),f=a("eb85"),h=a("eebe"),m=a.n(h),g=Object(l["a"])(r,i,s,!1,null,null,null);e["a"]=g.exports;m()(g,"components",{QCard:c["a"],QCardSection:d["a"],QInput:u["a"],QBtn:p["a"],QSeparator:f["a"]})},"3f07":function(t,e,a){},"49de":function(t,e,a){"use strict";(function(t){a("99af"),a("caad"),a("e260"),a("a15b"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("cca6"),a("d3b7"),a("e6cf"),a("ac1f"),a("25f0"),a("3ca3"),a("5319"),a("1276"),a("ddb0"),a("2b3d");var i=a("278c"),s=a.n(i),n=a("fbb2"),o=a("10b3"),r=a("7d5b"),l=a("5eaa"),c=a("7079"),d=a("caa3"),u=a("3eb8"),p=a("f9ea"),f=a("1732"),h=["POST","PUT","PATCH","DELETE"],m=100;e["a"]={name:"MainLayout",data:function(){return{table:"settings",isLoaded:!1,menuModel:!1,panelModel:"PageSales",logs:[],showSetJsonServer:!1,showAuthentication:!1,eventDialog:!1,importDialog:!1,exportDialog:!1,exitDialog:!1,baseUrl:"",user:"",password:"",importFile:void 0,dialogPos:{x:0,y:0}}},components:{Sales:n["a"],Purchases:o["a"],Customers:r["a"],Dealers:l["a"],Products:c["a"],PrintBarcode:d["a"],Summary:u["a"],Settings:p["a"]},beforeCreate:function(){var t=this;this.$on("error",(function(e){t.appendLogs("".concat(e,"\n"))})),this.UID=Object(f["a"])(),this.$global.stopBrowserBack()},created:function(){this.clearCache()},mounted:function(){var t=this;this.$set(this.$global.data,"baseUrl","".concat(localStorage.getItem("baseUrl")||window.location.origin,"/api").replace(/([^:])\/\//g,"$1/")),this.$set(this.$global.data,"users",void 0),this.$set(this.$global.data,"settings",void 0),this.$set(this.$global.data,"images",void 0),this.$set(this.$global.data,"modify",void 0),this.$set(this.$global.data,"panelModel",this.panelModel),this.baseUrl=this.$global.data.baseUrl.replace(/\/api$/,""),this.$jsonFetch.onError=function(e){if(e.response&&401===e.response.status)setTimeout((function(){t.$q.loading.hide(),t.showAuthentication=!0}),1e3);else{var a=e.response?"Error: ".concat(e.response.status," - ").concat(e.response.statusText):"Error: ".concat(e.message.slice(0,100));console.error(a),t.$emit("error",a),t.$q.notify({type:"negative",message:a}),t.$q.loading.hide()}},this.setDefaultsNotify(),console.log("Check Settings"),this.$q.loading.show({message:'<div class="text-h3">'.concat(this.$q.lang.table.loading,"</div>")}),this.images={logo:localStorage.getItem("logo"),logoColor:localStorage.getItem("logoColor")},this.$jsonFetch.get("".concat(this.baseUrl)).then((function(e){"OK"===e.data?t.loadSettings():(t.$q.loading.hide(),t.showSetJsonServer=!0)})).catch((function(e){t.$q.loading.hide(),t.showSetJsonServer=!0}))},computed:{settings:{get:function(){return this.$global.data.settings||{}}},images:{get:function(){return this.$global.data.images||{}},set:function(t){this.$global.data.images={logo:localStorage.getItem("logo"),logoColor:localStorage.getItem("logoColor")}}},dialogStyle:function(){return{transform:"translate(".concat(this.dialogPos.x,"px, ").concat(this.dialogPos.y,"px)")}},log:function(){return this.logs.join("")}},watch:{"$global.data.settings.update":function(t,e){var a=this;"undefined"!==typeof t&&this.$q.notify({message:'<div style="text-align: center; font-weight: bold;"><div style="font-size: large; text-decoration: underline;">'.concat(this.settings.name).concat(t?" เวอร์ชั่น: "+t:"","</div>ระบบมีเวอร์ชั่นใหม่แล้ว คุณต้องการเริ่มระบบใหม่ตอนนี้เลยมั้ย?</div>"),position:"top",color:"purple",timeout:0,actions:[{label:"เริ่มระบบใหม่",color:"yellow",handler:function(){a.$jsonFetch.patch("".concat(a.$global.data.baseUrl,"/").concat(a.table,"/").concat(a.$global.data.settings.id),{update:null},{params:{uid:a.UID}}).then((function(t){a.refreshPage()})).catch((function(t){}))}}]})},panelModel:function(t,e){this.$global.data.panelModel=t}},methods:{clearCache:function(){var t=+localStorage.getItem("timeCache");Date.now()-t>6e4&&(localStorage.setItem("timeCache",Date.now()),"serviceWorker"in navigator&&caches.keys().then((function(t){return Promise.all(t.map((function(t){return caches.delete(t)})))})).then((function(){navigator.serviceWorker.getRegistrations().then((function(t){return Promise.all(t.map((function(t){return t.unregister()})))})).then((function(){return window.location.reload()}))})))},setLocalStorageFromFile:function(t,e){var a=this;if(t&&e){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){localStorage.setItem(t,i.result),a.images={logo:localStorage.getItem("logo"),logoColor:localStorage.getItem("logoColor")}}}},refreshPage:function(t){t&&t.length>0&&localStorage.setItem("baseUrl",t),this.$nextTick((function(){return window.location.reload()}))},loadSettings:function(e){var a=this;console.log("Load Settings"),this.$q.loading.show({message:'<div class="text-h3">'.concat(this.$q.lang.table.loading,"</div>")}),this.$jsonFetch.get("".concat(this.$global.data.baseUrl,"/").concat(this.table,"?_page=1&_sort=id&_order=desc&_limit=1"),void 0,e?{headers:{Authorization:"Basic ".concat(t.from(this.user+":"+this.password).toString("base64"))}}:void 0).then((function(t){t.headers["x-total-count"]>0&&(a.$global.data.settings=Object.assign({},a.$global.data.settings,t.data.pop())),setTimeout((function(){a.$global.data.users={name:a.settings.email,password:a.settings.password},a.password=void 0,a.$refs.userInputRef&&a.$refs.userInputRef.focus(),a.isLoaded=!0,a.initialWebsocket(),a.$q.loading.hide(),a.showAuthentication=!1}),1e3)})).catch((function(t){a.$q.loading.hide(),t.response&&401!==t.response.status&&(console.error(t),a.$emit("error","Error ".concat(t.message)),a.$q.notify({type:"negative",message:"Error ".concat(t.message)}))}))},appendLogs:function(t){this.logs.length>=m&&this.logs.splice(-1,1),this.logs.splice(0,0,"[".concat((new Date).toLocaleString(),"] ").concat(t))},initialWebsocket:function(){this.$wsClient.open("".concat(this.$global.data.baseUrl.replace(/^http/,"ws"))),this.$wsClient.onmessage=function(t,e){var a=JSON.parse(t.data||"{}");if("LOG"===a.type)this.appendLogs(a.data);else if("ERROR"===a.type)console.error(a.data),this.appendLogs(a.data);else if("SCRIPT"===a.type&&a.data)setTimeout(a.data,1e3);else if(a.request&&h.includes(a.request.method)){var i=a.request.path.split("/"),n=s()(i,3),o=n[1],r=n[2];"api"!==o&&(r=o),"db"===r?this.refreshPage():("settings"===r&&(this.$global.data.settings=Object.assign({},this.$global.data.settings,a.response.body)),this.$global.data.modify={request:a.request,response:a.response})}else a&&"undefined"!==a&&"null"!==a&&console.log("UNKNOWN:",a)}.bind(this),this.$wsClient.onclose=function(t){1e3===t.code?console.log("WebSocketClient:",t.status):console.error("Error:",t.status);var e=1e4;console.log("WebSocketClient: Reconnect in ".concat(e," ms"),t),setTimeout(function(){console.log("WebSocketClient: reconnecting..."),this.loadSettings()}.bind(this),e)}.bind(this)},requestBroadcast:function(t){this.$wsClient.send(JSON.stringify({eval:"global.$wsServer.broadcast(JSON.stringify(".concat(JSON.stringify(t),"))")}))},requestBroadcastScript:function(t){this.requestBroadcast({type:"SCRIPT",data:t})},importDatabase:function(){var t=this;this.importFile&&(this.$q.loading.show({message:'<div class="text-h3">'.concat(this.$q.lang.table.loading,"</div>")}),this.importFile.text().then((function(e){t.$jsonFetch.post("".concat(t.$global.data.baseUrl,"/db"),JSON.parse(e)).then((function(e){t.$q.loading.hide(),t.$q.notify({type:"positive",message:"ข้อมูลทั้งหมดในระบบฐานข้อมูลได้รับการแทนที่ข้อมูลเดิมเรียบร้อยแล้ว"})})).catch((function(e){t.$q.loading.hide(),console.error(e),t.$emit("error","Error ".concat(e.message)),t.$q.notify({type:"negative",message:"Error ".concat(e.message)})}))})).catch((function(e){t.$q.loading.hide(),console.error(e),t.$emit("error","Error ".concat(e.message)),t.$q.notify({type:"negative",message:"Error ".concat(e.message)})})))},exportDatabase:function(){var t=this;this.$q.loading.show({message:'<div class="text-h3">'.concat(this.$q.lang.table.loading,"</div>")}),this.$jsonFetch.get("".concat(this.$global.data.baseUrl,"/db")).then((function(e){var a=document.createElement("a");a.href=URL.createObjectURL(new Blob([JSON.stringify(e.data,null,2)],{type:"text/plain"})),a.setAttribute("download","db.json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),t.$nextTick((function(){t.$q.loading.hide()}))})).catch((function(e){t.$q.loading.hide(),console.error(e),t.$emit("error","Error ".concat(e.message)),t.$q.notify({type:"negative",message:"Error ".concat(e.message)})}))},exitProgram:function(){var t=this;console.log("Clear Authorization"),this.$q.loading.show({message:'<div class="text-h3">'.concat(this.$q.lang.table.loading,"</div>")}),this.$jsonFetch.get("".concat(this.$global.data.baseUrl,"/").concat(this.table,"?_page=1&_sort=id&_order=desc&_limit=1"),void 0,{headers:{Authorization:"Bearer ="}}).then((function(e){t.refreshPage()})).catch((function(e){t.refreshPage()}))},onPanDialog:function(t){this.dialogPos={x:this.dialogPos.x+t.delta.x,y:this.dialogPos.y+t.delta.y}},keepAwake:function(){var t=this,e=this.getRandomIntInclusive(3,5);setTimeout((function(e){t.$jsonFetch.get("".concat(t.baseUrl)).then((function(t){console.log(t,e)})).catch((function(t){console.error(t,e)})),t.keepAwake()}),60*e*1e3,e)},getRandomIntInclusive:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)},setDefaultsNotify:function(){this.$q.notify.setDefaults({classes:"glossy",position:"bottom",icon:"info",html:!0,progress:!0,timeout:1e4,actions:[{icon:"cancel",color:"white"}]})},_debug:function(){var t;(t=console).log.apply(t,arguments)}}}}).call(this,a("1c35").Buffer)},"574d":function(t,e,a){},"599a":function(t,e,a){},"5eaa":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("JsonTable",{ref:"dealersRef",attrs:{"base-url":this.$global.data.baseUrl,params:{uid:t.UID},table:"dealers",title:"⭐ ข้อมูลผู้จำหน่าย ⭐",classes:t.settings.classes,columns:t.dealerColumns,onValidateData:t.onValidateData}})],1)},s=[],n=(a("caad"),a("b0c0"),a("ac1f"),a("2532"),a("1276"),a("ec67")),o=a("1732"),r={name:"PageDealers",data:function(){return{dealerColumns:[{name:"id",label:"รหัสผู้จำหน่าย",field:"id",sortable:!0,edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"name",label:"ชื่อผู้จำหน่าย",field:"name",sortable:!0,classes:"text-green-10 text-left",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"address",label:"สถานที่ตั้ง - ที่อยู่",field:"address",sortable:!0,classes:"text-green-10 text-left",edit:{type:"textarea",inputClass:"",prefix:"",suffix:""}},{name:"telephone",label:"หมายเลขโทรศัพท์",field:"telephone",sortable:!0,classes:"text-green-10 text-center",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"email",label:"อีเมล์",field:"email",sortable:!0,classes:"text-green-10 text-center",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],isRequireLoadDataDealers:!1}},components:{JsonTable:n["a"]},beforeCreate:function(){this.UID=Object(o["a"])()},computed:{settings:{get:function(){return this.$global.data.settings||{}}}},watch:{"$global.data.modify":function(t,e){t.request&&t.request.query&&t.request.query.uid!==this.UID&&t.request.path.split("/").includes("dealers")&&(this.$global.data.panelModel===this.$options.name?this.$refs.dealersRef.onRequest():this.isRequireLoadDataDealers||(this.isRequireLoadDataDealers=!0))},"$global.data.panelModel":function(t,e){t===this.$options.name&&this.isRequireLoadDataDealers&&(this.isRequireLoadDataDealers=!1,this.$refs.dealersRef.onRequest())}},methods:{onValidateData:function(t,e,a){return"address"===e.name||"telephone"===e.name||"email"===e.name||("text"===e.edit.type||"textarea"===e.edit.type||"date"===e.edit.type?!!t||"ยังไม่ได้กำหนดข้อมูล":"number"!==e.edit.type&&"decimal"!==e.edit.type||(t>=0||"ข้อมูลต้องมีค่ามากกว่าหรือเท่ากับ 0"))}}},l=r,c=a("2877"),d=Object(c["a"])(l,i,s,!1,null,null,null);e["a"]=d.exports},"613c":function(t,e,a){"use strict";a("599a")},"63c0":function(t,e,a){"use strict";a("3f07")},7079:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("JsonTable",{ref:"productsRef",attrs:{"base-url":this.$global.data.baseUrl,params:{uid:t.UID},query:"_expand=type&_expand=unit",table:"products",title:"⭐ รายการสินค้า ⭐",classes:t.settings.classes,columns:t.productColumns,onInitAddData:t.onInitAddData,onValidateData:t.onValidateData,onBeforeUpdateData:t.onBeforeUpdateData,onAfterUpdateData:t.onAfterUpdateData},scopedSlots:t._u([{key:"header",fn:function(){return[a("q-btn",{staticClass:"q-ma-xs",attrs:{glossy:"",rounded:"",color:"primary",size:"sm",label:"ประเภท"},on:{click:function(){return t.dialogTypeVisible=!0}}},[a("q-tooltip",{attrs:{"content-class":"bg-primary"}},[t._v("แก้ไขประเภทสินค้า")])],1),a("q-btn",{staticClass:"q-ma-xs",attrs:{glossy:"",rounded:"",color:"secondary",size:"sm",label:"หน่วยนับ"},on:{click:function(){return t.dialogUnitVisible=!0}}},[a("q-tooltip",{attrs:{"content-class":"bg-secondary"}},[t._v("แก้ไขหน่วยนับ")])],1)]},proxy:!0}])}),a("q-dialog",{attrs:{value:t.dialogTypeVisible||t.dialogUnitVisible,persistent:""},on:{input:function(e){return t.dialogTypeVisible=t.dialogUnitVisible=!1}}},[a("q-card",{style:t.dialogStyle},[a("q-card-section",{staticClass:"q-pa-none",staticStyle:{cursor:"grab"}},[a("q-bar",{directives:[{name:"touch-pan",rawName:"v-touch-pan.mouse",value:t.onPanDialog,expression:"onPanDialog",modifiers:{mouse:!0}}],staticClass:"bg-primary text-white"},[a("div",[t._v(t._s(t.dialogTypeVisible?"⭐ ประเภทสินค้า ⭐":t.dialogUnitVisible?"⭐ หน่วยนับ ⭐":""))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1)],1),a("q-card-section",{staticClass:"q-ma-none q-pa-none"},[a("JsonTable",{directives:[{name:"show",rawName:"v-show",value:t.dialogTypeVisible,expression:"dialogTypeVisible"}],ref:"typesRef",staticClass:"q-ma-none q-pa-none",attrs:{"base-url":this.$global.data.baseUrl,params:{uid:t.UID},rowsPerPage:0,table:"types",title:"⭐ ประเภทสินค้า ⭐",classes:t.settings.classes,columns:t.typeColumns,onValidateData:t.onValidateData}}),a("JsonTable",{directives:[{name:"show",rawName:"v-show",value:t.dialogUnitVisible,expression:"dialogUnitVisible"}],ref:"unitsRef",staticClass:"q-ma-none q-pa-none",attrs:{"base-url":this.$global.data.baseUrl,params:{uid:t.UID},rowsPerPage:0,table:"units",title:"⭐ หน่วยนับ ⭐",classes:t.settings.classes,columns:t.unitColumns,onValidateData:t.onValidateData}})],1)],1)],1)],1)},s=[],n=(a("99af"),a("caad"),a("b0c0"),a("d3b7"),a("e6cf"),a("ac1f"),a("2532"),a("4d90"),a("1276"),a("498a"),a("ec67")),o=a("1732"),r={name:"PageProducts",data:function(){return{productColumns:[{name:"id",label:"รหัสสินค้า",field:"id",sortable:!0,edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"barcode",label:"บาร์โค้ด",field:"barcode",sortable:!0,classes:"text-green-10",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"typeId",label:"ประเภทสินค้า",field:"typeId",sortable:!0,classes:"text-green-10 text-center",edit:{type:"number",inputClass:"",prefix:"",suffix:""}},{name:"unitId",label:"หน่วยนับ",field:"unitId",sortable:!0,classes:"text-green-10 text-center",edit:{type:"number",inputClass:"",prefix:"",suffix:""}},{name:"name",label:"ชื่อสินค้า",field:"name",sortable:!0,classes:"text-green-10 text-left",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"cost",label:"ราคาทุน",field:"cost",sortable:!0,classes:"text-green-10",edit:{type:"decimal",inputClass:"",prefix:"",suffix:""}},{name:"price",label:"ราคาขาย",field:"price",sortable:!0,classes:"text-green-10",edit:{type:"decimal",inputClass:"",prefix:"",suffix:""}},{name:"quantity",label:"คงเหลือ",field:"quantity",sortable:!0,classes:"text-green-10 text-weight-bold",edit:{type:"number",inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],typeColumns:[{name:"id",label:"รหัสประเภท",field:"id",sortable:!0,edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"name",label:"ประเภทสินค้า",field:"name",sortable:!0,classes:"text-green-10 text-left",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"detail",label:"รายละเอียด",field:"detail",sortable:!0,classes:"text-green-10 text-left",edit:{type:"textarea",inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],unitColumns:[{name:"id",label:"รหัสหน่วยนับ",field:"id",sortable:!0,edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"name",label:"หน่วยนับ",field:"name",sortable:!0,classes:"text-green-10 text-left",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"detail",label:"รายละเอียด",field:"detail",sortable:!0,classes:"text-green-10 text-left",edit:{type:"textarea",inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],isRequireLoadDataProducts:!1,isRequireLoadDataTypes:!1,isRequireLoadDataUnits:!1,dialogTypeVisible:!1,dialogUnitVisible:!1,dialogPos:{x:0,y:0}}},components:{JsonTable:n["a"]},beforeCreate:function(){this.UID=Object(o["a"])()},computed:{settings:{get:function(){return this.$global.data.settings||{}}},dialogStyle:function(){return{transform:"translate(".concat(this.dialogPos.x,"px, ").concat(this.dialogPos.y,"px)"),minWidth:"fit-content"}}},watch:{"$global.data.modify":function(t,e){t.request&&(t.request.query&&t.request.query.uid!==this.UID&&t.request.path.split("/").includes("products")?this.$global.data.panelModel===this.$options.name?this.$refs.productsRef.onRequest():this.isRequireLoadDataProducts||(this.isRequireLoadDataProducts=!0):t.request.path.split("/").includes("types")?this.$global.data.panelModel===this.$options.name?(this.$refs.typesRef.onRequest(),this.$refs.productsRef.onRequest()):(this.isRequireLoadDataTypes||(this.isRequireLoadDataTypes=!0),this.isRequireLoadDataProducts||(this.isRequireLoadDataProducts=!0)):t.request.path.split("/").includes("units")&&(this.$global.data.panelModel===this.$options.name?(this.$refs.unitsRef.onRequest(),this.$refs.productsRef.onRequest()):(this.isRequireLoadDataUnits||(this.isRequireLoadDataUnits=!0),this.isRequireLoadDataProducts||(this.isRequireLoadDataProducts=!0))))},"$global.data.panelModel":function(t,e){t===this.$options.name&&(this.isRequireLoadDataProducts&&(this.isRequireLoadDataProducts=!1,this.$refs.productsRef.onRequest()),this.isRequireLoadDataTypes&&(this.isRequireLoadDataTypes=!1,this.$refs.typesRef.onRequest()),this.isRequireLoadDataUnits&&(this.isRequireLoadDataUnits=!1,this.$refs.unitsRef.onRequest()))},dialogTypeVisible:function(t,e){var a=this;t&&this.$nextTick((function(){var t=a.$refs.typesRef.$el.querySelector("div.q-table__middle");t&&(t.style.maxHeight="fit-content")}))},dialogUnitVisible:function(t,e){var a=this;t&&this.$nextTick((function(){var t=a.$refs.unitsRef.$el.querySelector("div.q-table__middle");t&&(t.style.maxHeight="fit-content")}))}},methods:{onInitAddData:function(t){t.barcode=""},onValidateData:function(t,e,a){return"barcode"===e.name||"detail"===e.name||("typeId"===e.name||"unitId"===e.name||"text"===e.edit.type||"textarea"===e.edit.type||"date"===e.edit.type?!!t||"ยังไม่ได้กำหนดข้อมูล":"number"!==e.edit.type&&"decimal"!==e.edit.type||(t>=0||"ข้อมูลต้องมีค่ามากกว่าหรือเท่ากับ 0"))},onBeforeUpdateData:function(t,e){e.price||(e.price=Math.round(e.cost+e.cost*this.settings.profit/100))},onAfterUpdateData:function(t,e,a){var i=this;if(e.barcode=e.barcode.trim(),!e.barcode)return new Promise((function(t,a){var s={id:e.id,barcode:"".concat(e.id).padStart(13,"0")};e.barcode=s.barcode,i.$jsonFetch.patch("".concat(i.$global.data.baseUrl,"/products/").concat(e.id),s,{params:{uid:i.UID}}).then((function(a){t(),i.$emit("update-cell","products",e,"barcode",a.data)})).catch((function(t){a(t)}))}))},onPanDialog:function(t){this.dialogPos={x:this.dialogPos.x+t.delta.x,y:this.dialogPos.y+t.delta.y}}}},l=r,c=(a("a72c"),a("2877")),d=a("9c40"),u=a("05c0"),p=a("24e8"),f=a("f09f"),h=a("a370"),m=a("d847"),g=a("2c91"),b=a("eaac"),y=a("75c3"),v=a("7f67"),x=a("eebe"),w=a.n(x),q=Object(c["a"])(l,i,s,!1,null,"7bf71d74",null);e["a"]=q.exports;w()(q,"components",{QBtn:d["a"],QTooltip:u["a"],QDialog:p["a"],QCard:f["a"],QCardSection:h["a"],QBar:m["a"],QSpace:g["a"],QTable:b["a"]}),w()(q,"directives",{TouchPan:y["a"],ClosePopup:v["a"]})},"713b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"hHh lpR fFf"}},[a("q-header",{staticClass:"bg-primary text-white",attrs:{elevated:"","height-hint":"98"}},[a("q-toolbar",{staticClass:"bg-primary glossy text-white"},[a("q-fab",{attrs:{dense:"",flat:"",round:"",square:"",direction:"down","vertical-actions-align":"left",icon:"menu"},model:{value:t.menuModel,callback:function(e){t.menuModel=e},expression:"menuModel"}},[a("q-fab-action",{attrs:{glossy:"",square:"",color:"light-blue",label:"ขายสินค้า","label-position":"right",icon:"point_of_sale"},on:{click:function(e){t.panelModel="PageSales"}}}),a("q-fab-action",{attrs:{glossy:"",square:"",color:"cyan",label:"ซื้อสินค้า","label-position":"right",icon:"shopping_cart"},on:{click:function(e){t.panelModel="PagePurchases"}}}),a("q-fab-action",{attrs:{glossy:"",square:"",color:"teal",label:"ข้อมูลลูกค้า","label-position":"right",icon:"people"},on:{click:function(e){t.panelModel="PageCustomers"}}}),a("q-fab-action",{attrs:{glossy:"",square:"",color:"secondary",label:"ข้อมูลผู้จำหน่าย","label-position":"right",icon:"people_outline"},on:{click:function(e){t.panelModel="PageDealers"}}}),a("q-fab-action",{attrs:{glossy:"",square:"",color:"positive",label:"รายการสินค้า","label-position":"right",icon:"widgets"},on:{click:function(e){t.panelModel="PageProducts"}}}),a("q-fab-action",{attrs:{glossy:"",square:"",color:"accent",label:"พิมพ์บาร์โค้ด","label-position":"right",icon:"qr_code"},on:{click:function(e){t.panelModel="PagePrintBarcode"}}}),a("q-fab-action",{attrs:{glossy:"",square:"",color:"pink",label:"ประมวลผลข้อมูล","label-position":"right",icon:"auto_graph"},on:{click:function(e){t.panelModel="PageSummary"}}}),a("q-fab-action",{attrs:{glossy:"",square:"",color:"negative",label:"การตั้งค่า","label-position":"right",icon:"settings"},on:{click:function(e){t.panelModel="PageSettings"}}}),a("q-fab-action",{attrs:{glossy:"",square:"",color:"deep-orange",label:"ปิดระบบ","label-position":"right",icon:"power_settings_new"},on:{click:function(e){t.exitDialog=!0}}})],1),a("q-toolbar-title",[t._v("\n        "+t._s(t.settings.name)+"\n      ")]),a("q-btn-group",{attrs:{push:""}},[a("q-btn",{attrs:{glossy:"",color:"light-blue",icon:"point_of_sale"},on:{click:function(e){t.panelModel="PageSales"}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale","content-class":"bg-light-blue","content-style":"font-size: 14px;"}},[t._v("\n            ขายสินค้า\n          ")])],1),a("q-btn",{attrs:{glossy:"",color:"cyan",icon:"shopping_cart"},on:{click:function(e){t.panelModel="PagePurchases"}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale","content-class":"bg-cyan","content-style":"font-size: 14px;"}},[t._v("\n            ซื้อสินค้า\n          ")])],1),a("q-btn",{attrs:{glossy:"",color:"teal",icon:"people"},on:{click:function(e){t.panelModel="PageCustomers"}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale","content-class":"bg-teal","content-style":"font-size: 14px;"}},[t._v("\n            ข้อมูลลูกค้า\n          ")])],1),a("q-btn",{attrs:{glossy:"",color:"secondary",icon:"people_outline"},on:{click:function(e){t.panelModel="PageDealers"}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale","content-class":"bg-secondary","content-style":"font-size: 14px;"}},[t._v("\n            ข้อมูลผู้จำหน่าย\n          ")])],1),a("q-btn",{attrs:{glossy:"",color:"positive",icon:"widgets"},on:{click:function(e){t.panelModel="PageProducts"}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale","content-class":"bg-positive","content-style":"font-size: 14px;"}},[t._v("\n            รายการสินค้า\n          ")])],1),a("q-btn",{attrs:{glossy:"",color:"accent",icon:"qr_code"},on:{click:function(e){t.panelModel="PagePrintBarcode"}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale","content-class":"bg-accent","content-style":"font-size: 14px;"}},[t._v("\n            พิมพ์บาร์โค้ด\n          ")])],1),a("q-btn",{attrs:{glossy:"",color:"pink",icon:"auto_graph"},on:{click:function(e){t.panelModel="PageSummary"}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale","content-class":"bg-pink","content-style":"font-size: 14px;"}},[t._v("\n            ประมวลผลข้อมูล\n          ")])],1),a("q-btn",{attrs:{glossy:"",color:"negative",icon:"settings"},on:{click:function(e){t.panelModel="PageSettings"}}},[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale","content-class":"bg-negative","content-style":"font-size: 14px;"}},[t._v("\n            การตั้งค่า\n          ")])],1),a("q-btn-dropdown",{attrs:{glossy:"",color:"deep-orange","dropdown-icon":"handyman"},scopedSlots:t._u([{key:"label",fn:function(){return[a("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle","transition-show":"scale","transition-hide":"scale","content-class":"bg-deep-orange","content-style":"font-size: 14px;"}},[t._v("\n              เครื่องมือ\n            ")])]},proxy:!0}])},[a("q-list",[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.eventDialog=!0}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{glossy:"",color:"primary","text-color":"white",icon:"help"}})],1),a("q-item-section",[a("q-item-label",[t._v("รายงานเหตุการณ์")])],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.showSetJsonServer=!0}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{glossy:"",color:"teal","text-color":"white",icon:"power"}})],1),a("q-item-section",[a("q-item-label",[t._v("การเชื่อมต่อข้อมูล")])],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.exportDialog=!0}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{glossy:"",color:"positive","text-color":"white",icon:"cloud_download"}})],1),a("q-item-section",[a("q-item-label",[t._v("ส่งออกฐานข้อมูล")])],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.$refs.importFileRef.$el.click()}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{glossy:"",color:"negative","text-color":"white",icon:"cloud_upload"}})],1),a("q-item-section",[a("q-item-label",[t._v("นำเข้าฐานข้อมูล")])],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.exitDialog=!0}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{glossy:"",color:"deep-orange","text-color":"white",icon:"power_settings_new"}})],1),a("q-item-section",[a("q-item-label",[t._v("ปิดระบบ")])],1)],1)],1)],1)],1)],1)],1),a("q-page-container",[a("keep-alive",[t.isLoaded?a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.panelModel,callback:function(e){t.panelModel=e},expression:"panelModel"}},[a("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"PageSales"}},[a("keep-alive",[a("Sales")],1)],1),a("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"PagePurchases"}},[a("keep-alive",[a("Purchases")],1)],1),a("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"PageCustomers"}},[a("keep-alive",[a("Customers")],1)],1),a("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"PageDealers"}},[a("keep-alive",[a("Dealers")],1)],1),a("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"PageProducts"}},[a("keep-alive",[a("Products")],1)],1),a("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"PagePrintBarcode"}},[a("keep-alive",[a("PrintBarcode")],1)],1),a("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"PageSummary"}},[a("keep-alive",[a("Summary")],1)],1),a("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"PageSettings"}},[a("keep-alive",[a("Settings")],1)],1)],1):t._e()],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.showSetJsonServer,callback:function(e){t.showSetJsonServer=e},expression:"showSetJsonServer"}},[a("q-card",{style:t.dialogStyle},[a("q-card-section",{staticClass:"q-pa-none",staticStyle:{cursor:"grab","min-width":"500px"}},[a("q-bar",{directives:[{name:"touch-pan",rawName:"v-touch-pan.mouse",value:t.onPanDialog,expression:"onPanDialog",modifiers:{mouse:!0}}],staticClass:"bg-primary text-white"},[a("div",[t._v("Quasar Framework "+t._s(t.$q.version))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1)],1),a("q-card-section",[a("div",{staticClass:"q-pa-md",staticStyle:{"min-width":"500px"}},[a("q-input",{ref:"baseUrlInputRef",attrs:{type:"text",autofocus:"",clearable:"",counter:"","stack-label":"",debounce:"200",label:"URL ของระบบฐานข้อมูล","input-class":"text-primary",rules:[function(t){return t&&t.length>0||"ยังไม่ได้กำหนดข้อมูล"}]},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),function(){return t.refreshPage(t.baseUrl)}())},focus:function(t){return t&&t.target&&"function"===typeof t.target.select&&t.target.select()},clear:function(){return t.baseUrl=t.$global.data.baseUrl.replace(/\/api$/,""),t.$nextTick((function(){return t.$refs.baseUrlInputRef.resetValidation()}))}},model:{value:t.baseUrl,callback:function(e){t.baseUrl=e},expression:"baseUrl"}}),a("q-file",{attrs:{label:"โลโก้ แบบไม่มีสี"},on:{input:function(e){return t.setLocalStorageFromFile("logo",e)}},scopedSlots:t._u([{key:"default",fn:function(){return[a("img",{attrs:{src:t.images.logo,width:"80"}})]},proxy:!0}])}),a("q-file",{attrs:{label:"โลโก้ แบบมีสี"},on:{input:function(e){return t.setLocalStorageFromFile("logoColor",e)}},scopedSlots:t._u([{key:"default",fn:function(){return[a("img",{attrs:{src:t.images.logoColor,width:"80"}})]},proxy:!0}])})],1)]),a("q-card-actions",{staticClass:"q-pa-md",attrs:{align:"evenly"}},[a("q-btn",{attrs:{color:"primary",label:"ตกลง",disable:!(t.baseUrl&&t.baseUrl.length>0)},on:{click:function(e,a){return t.refreshPage(t.baseUrl)}}})],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.showAuthentication,callback:function(e){t.showAuthentication=e},expression:"showAuthentication"}},[a("q-card",{staticStyle:{background:"radial-gradient(circle at center, rgba(255, 255, 255, 1.0), rgba(80, 160, 240, 0.8))"}},[a("q-card-section",{staticClass:"q-pa-none",attrs:{align:"evenly"}},[a("div",{staticClass:"q-pb-none",attrs:{align:"center"}},[a("img",{attrs:{src:t.images.logoColor,width:"300"}})])]),a("q-card-section",[a("div",{staticClass:"q-pa-md",staticStyle:{"min-width":"500px"}},[a("q-input",{ref:"userInputRef",attrs:{type:"email",autofocus:"",clearable:"",counter:"","stack-label":"",debounce:"200",label:"อีเมล์","input-class":"text-center text-accent text-h4",rules:[function(t){return t&&t.length>0&&t.includes("@")||"ยังไม่ได้กำหนดข้อมูล อีเมล์"}]},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),function(){return t.$refs.passwordInputRef.focus()}())},focus:function(t){return t&&t.target&&"function"===typeof t.target.select&&t.target.select()},clear:function(){return t.user=void 0,t.$nextTick((function(){return t.$refs.userInputRef.resetValidation()}))}},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),a("q-input",{ref:"passwordInputRef",attrs:{type:"password",clearable:"",counter:"","stack-label":"",debounce:"200",label:"รหัสผ่าน","input-class":"text-center text-accent text-h4",rules:[function(t){return!t||t&&t.length>=0||"ยังไม่ได้กำหนดข้อมูล รหัสผ่าน"}]},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),function(){return t.user&&t.user.length>0&&(!t.password||t.password&&t.password.length>=0)&&t.loadSettings(!0)}())},focus:function(t){return t&&t.target&&"function"===typeof t.target.select&&t.target.select()},clear:function(){return t.password=void 0,t.$nextTick((function(){return t.$refs.passwordInputRef.resetValidation()}))}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),a("q-card-actions",{staticClass:"q-pa-md",attrs:{align:"evenly"}},[a("q-btn",{attrs:{color:"primary",label:"เปิดใช้งาน",disable:!(t.user&&t.user.length>0&&(!t.password||t.password&&t.password.length>=0))},on:{click:function(e,a){return t.loadSettings(!0)}}})],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale","full-width":""},model:{value:t.eventDialog,callback:function(e){t.eventDialog=e},expression:"eventDialog"}},[a("q-card",{style:t.dialogStyle},[a("q-card-section",{staticClass:"q-pa-none",staticStyle:{cursor:"grab","min-width":"500px"}},[a("q-bar",{directives:[{name:"touch-pan",rawName:"v-touch-pan.mouse",value:t.onPanDialog,expression:"onPanDialog",modifiers:{mouse:!0}}],staticClass:"bg-primary text-white"},[a("div",[t._v("Quasar Framework "+t._s(t.$q.version))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1)],1),a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm",staticStyle:{"white-space":"pre"}},[t._v(t._s(t.log))])])],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.exportDialog,callback:function(e){t.exportDialog=e},expression:"exportDialog"}},[a("q-card",{style:t.dialogStyle},[a("q-card-section",{staticClass:"q-pa-none",staticStyle:{cursor:"grab","min-width":"500px"}},[a("q-bar",{directives:[{name:"touch-pan",rawName:"v-touch-pan.mouse",value:t.onPanDialog,expression:"onPanDialog",modifiers:{mouse:!0}}],staticClass:"bg-primary text-white"},[a("div",[t._v("Quasar Framework "+t._s(t.$q.version))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1)],1),a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{color:"positive","text-color":"white",icon:"cloud_download"}}),a("span",{staticClass:"q-ml-sm"},[t._v("กรุณายืนยันการส่งออกไฟล์ฐานข้อมูล (db.json)")]),a("span",{staticClass:"q-ml-sm"},[t._v("(คำแนะนำ) ข้อมูลทั้งหมดในระบบฐานข้อมูลจะได้รับการส่งออกไปบันทึกไว้ในไฟล์ db.json")])],1),a("q-card-actions",{staticClass:"q-pa-md",attrs:{align:"evenly"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"ยกเลิก"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"ตกลง"},on:{click:function(e){return t.exportDatabase()}}})],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},on:{hide:function(e){t.importFile=void 0}},model:{value:t.importDialog,callback:function(e){t.importDialog=e},expression:"importDialog"}},[a("q-card",{staticClass:"bg-negative text-white",style:t.dialogStyle},[a("q-card-section",{staticClass:"q-pa-none",staticStyle:{cursor:"grab","min-width":"500px"}},[a("q-bar",{directives:[{name:"touch-pan",rawName:"v-touch-pan.mouse",value:t.onPanDialog,expression:"onPanDialog",modifiers:{mouse:!0}}],staticClass:"bg-primary text-white"},[a("div",[t._v("Quasar Framework "+t._s(t.$q.version))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1)],1),a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{color:"warning","text-color":"white",icon:"cloud_upload"}}),a("span",{staticClass:"q-ml-sm"},[t._v("กรุณายืนยันการนำเข้าไฟล์ฐานข้อมูล (db.json)")]),a("span",{staticClass:"q-ml-sm"},[t._v("(คำเตือน) ข้อมูลทั้งหมดในระบบฐานข้อมูลจะได้รับการแทนที่ข้อมูลเดิมจากการนำเข้าของไฟล์ db.json")])],1),a("q-card-actions",{staticClass:"q-pa-md",attrs:{align:"evenly"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"ยกเลิก"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"ตกลง"},on:{click:function(e){return t.importDatabase()}}})],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.exitDialog,callback:function(e){t.exitDialog=e},expression:"exitDialog"}},[a("q-card",{style:t.dialogStyle},[a("q-card-section",{staticClass:"q-pa-none",staticStyle:{cursor:"grab","min-width":"500px"}},[a("q-bar",{directives:[{name:"touch-pan",rawName:"v-touch-pan.mouse",value:t.onPanDialog,expression:"onPanDialog",modifiers:{mouse:!0}}],staticClass:"bg-primary text-white"},[a("div",[t._v("Quasar Framework "+t._s(t.$q.version))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1)],1),a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{color:"deep-orange","text-color":"white",icon:"power_settings_new"}}),a("span",{staticClass:"q-ml-sm"},[t._v("กรุณายืนยันการปิดระบบ")])],1),a("q-card-actions",{staticClass:"q-pa-md",attrs:{align:"evenly"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"ยกเลิก"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"ตกลง"},on:{click:function(e){return t.exitProgram()}}})],1)],1)],1),a("q-file",{ref:"importFileRef",staticClass:"hidden",attrs:{accept:".json, application/json"},on:{input:function(e){t.importDialog=!0}},model:{value:t.importFile,callback:function(e){t.importFile=e},expression:"importFile"}})],1)},s=[],n=a("49de"),o=n["a"],r=(a("63c0"),a("2877")),l=a("4d5a"),c=a("e359"),d=a("65c6"),u=a("c294"),p=a("72db"),f=a("6ac5"),h=a("cb32"),m=a("e7a9"),g=a("9c40"),b=a("05c0"),y=a("f20b"),v=a("1c1c"),x=a("66e5"),w=a("4074"),q=a("0170"),_=a("09e3"),D=a("adad"),C=a("823b"),P=a("7ff0"),R=a("24e8"),S=a("f09f"),$=a("a370"),k=a("d847"),I=a("2c91"),F=a("27f9"),U=a("7d53"),L=a("4b7e"),T=a("7f67"),j=a("75c3"),O=a("eebe"),Q=a.n(O),V=Object(r["a"])(o,i,s,!1,null,"75f44ad6",null);e["default"]=V.exports;Q()(V,"components",{QLayout:l["a"],QHeader:c["a"],QToolbar:d["a"],QFab:u["a"],QFabAction:p["a"],QToolbarTitle:f["a"],QAvatar:h["a"],QBtnGroup:m["a"],QBtn:g["a"],QTooltip:b["a"],QBtnDropdown:y["a"],QList:v["a"],QItem:x["a"],QItemSection:w["a"],QItemLabel:q["a"],QPageContainer:_["a"],QTabPanels:D["a"],QTabPanel:C["a"],QFooter:P["a"],QDialog:R["a"],QCard:S["a"],QCardSection:$["a"],QBar:k["a"],QSpace:I["a"],QInput:F["a"],QFile:U["a"],QCardActions:L["a"]}),Q()(V,"directives",{ClosePopup:T["a"],TouchPan:j["a"]})},"7d5b":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("JsonTable",{ref:"customersRef",attrs:{"base-url":this.$global.data.baseUrl,params:{uid:t.UID},table:"customers",title:"⭐ ข้อมูลลูกค้า ⭐",classes:t.settings.classes,columns:t.customerColumns,onValidateData:t.onValidateData}})],1)},s=[],n=(a("caad"),a("b0c0"),a("ac1f"),a("2532"),a("1276"),a("ec67")),o=a("1732"),r={name:"PageCustomers",data:function(){return{customerColumns:[{name:"id",label:"รหัสลูกค้า",field:"id",sortable:!0,edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"name",label:"ชื่อลูกค้า",field:"name",sortable:!0,classes:"text-green-10 text-left",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"address",label:"สถานที่ตั้ง - ที่อยู่",field:"address",sortable:!0,classes:"text-green-10 text-left",edit:{type:"textarea",inputClass:"",prefix:"",suffix:""}},{name:"telephone",label:"หมายเลขโทรศัพท์",field:"telephone",sortable:!0,classes:"text-green-10 text-center",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"email",label:"อีเมล์",field:"email",sortable:!0,classes:"text-green-10 text-center",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],isRequireLoadDataCustomers:!1}},components:{JsonTable:n["a"]},beforeCreate:function(){this.UID=Object(o["a"])()},computed:{settings:{get:function(){return this.$global.data.settings||{}}}},watch:{"$global.data.modify":function(t,e){t.request&&t.request.query&&t.request.query.uid!==this.UID&&t.request.path.split("/").includes("customers")&&(this.$global.data.panelModel===this.$options.name?this.$refs.customersRef.onRequest():this.isRequireLoadDataCustomers||(this.isRequireLoadDataCustomers=!0))},"$global.data.panelModel":function(t,e){t===this.$options.name&&this.isRequireLoadDataCustomers&&(this.isRequireLoadDataCustomers=!1,this.$refs.customersRef.onRequest())}},methods:{onValidateData:function(t,e,a){return"address"===e.name||"telephone"===e.name||"email"===e.name||("text"===e.edit.type||"textarea"===e.edit.type||"date"===e.edit.type?!!t||"ยังไม่ได้กำหนดข้อมูล":"number"!==e.edit.type&&"decimal"!==e.edit.type||(t>=0||"ข้อมูลต้องมีค่ามากกว่าหรือเท่ากับ 0"))}}},l=r,c=a("2877"),d=Object(c["a"])(l,i,s,!1,null,null,null);e["a"]=d.exports},a72c:function(t,e,a){"use strict";a("fbd9")},caa3:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("JsonTable",{ref:"productsRef",attrs:{"base-url":this.$global.data.baseUrl,params:{uid:t.UID},query:"_expand=type&_expand=unit",table:"products",title:"⭐ รายการสินค้า - พิมพ์บาร์โค้ด ⭐",classes:t.settings.classes,columns:t.productColumns.filter((function(t){return"printsPerItem"!==t.name})),hideAddButton:"",hideEditButton:"",hideRemoveButton:""},scopedSlots:t._u([{key:"body",fn:function(e){var i=e.props;return[a("q-btn",{staticClass:"q-ma-xs",attrs:{glossy:"",round:"",icon:"add",color:"orange",size:"xs"},on:{click:function(){return t.addSelectedItem(i.row)}}},[a("q-tooltip",{attrs:{"content-class":"bg-orange"}},[t._v("เพิ่มรายการพิมพ์บาร์โค้ด")])],1)]}}])}),a("JsonTable",{attrs:{title:"⭐ รายการพิมพ์บาร์โค้ด "+t.selectedItems.length+" รายการ ⭐",classes:t.settings.classes,columns:t.productColumns,hideSearchButton:"",hideRefreshButton:"",hideAddButton:"",hideEditButton:"",hideRemoveButton:"",hidePagination:""},on:{"update-cell":function(e,a,i){return t.renderBarcode(!0)}},scopedSlots:t._u([{key:"header",fn:function(e){var i=e.props;return[a("q-checkbox",{attrs:{label:"แสดงชื่อสินค้า"},model:{value:t.displayName,callback:function(e){t.displayName=e},expression:"displayName"}}),a("q-space",{staticClass:"q-px-sm",attrs:{vertical:""}}),a("q-checkbox",{attrs:{label:"แสดงราคาสินค้า"},model:{value:t.displayPrice,callback:function(e){t.displayPrice=e},expression:"displayPrice"}}),a("q-space",{staticClass:"q-px-sm",attrs:{vertical:""}}),a("q-checkbox",{attrs:{label:"แสดงบาร์โค้ด"},model:{value:t.displayBarcode,callback:function(e){t.displayBarcode=e},expression:"displayBarcode"}}),a("q-space",{staticClass:"q-px-sm",attrs:{vertical:""}}),a("q-input",{attrs:{type:"number",dense:"",clearable:"",counter:"",debounce:"1000",label:"ความกว้างของบาร์โค้ด","input-class":"text-center",rules:[function(t){return t>0&&t<=200||"ข้อมูลต้องมีค่ามากกว่า 0"}]},on:{focus:t.selectOnFocus,clear:function(){return t.barcodeWidth=150}},model:{value:t.barcodeWidth,callback:function(e){t.barcodeWidth=t._n(e)},expression:"barcodeWidth"}},[a("q-tooltip",{attrs:{"content-class":"bg-green"}},[t._v("ความกว้างของบาร์โค้ด")])],1),a("q-space",{staticClass:"q-px-md",attrs:{vertical:""}}),a("q-input",{attrs:{type:"number",dense:"",clearable:"",counter:"",debounce:"1000",label:"ความสูงของบาร์โค้ด","input-class":"text-center",rules:[function(t){return t>0&&t<=200||"ข้อมูลต้องมีค่ามากกว่า 0"}]},on:{focus:t.selectOnFocus,clear:function(){return t.barcodeHeight=40}},model:{value:t.barcodeHeight,callback:function(e){t.barcodeHeight=t._n(e)},expression:"barcodeHeight"}},[a("q-tooltip",{attrs:{"content-class":"bg-green"}},[t._v("ความสูงของบาร์โค้ด")])],1),a("q-space",{staticClass:"q-px-md",attrs:{vertical:""}}),a("q-input",{attrs:{type:"number",dense:"",clearable:"",counter:"",debounce:"1000",label:"จำนวนบาร์โค้ด","input-class":"text-center",rules:[function(t){return t>0&&t<=100||"ข้อมูลต้องมีค่ามากกว่า 0"}]},on:{focus:t.selectOnFocus,clear:function(){return t.printsPerItem=1}},model:{value:t.printsPerItem,callback:function(e){t.printsPerItem=t._n(e)},expression:"printsPerItem"}},[a("q-tooltip",{attrs:{"content-class":"bg-green"}},[t._v("จำนวนบาร์โค้ด")])],1),a("q-space",{staticClass:"q-px-md",attrs:{vertical:""}}),a("q-btn",{staticClass:"q-ma-xs",attrs:{glossy:"",round:"",icon:"print",color:"accent",size:"xs",disable:t.selectedItems<=0},on:{click:function(){return t.printAllSelectedItem(i)}}},[a("q-tooltip",{attrs:{"content-class":"bg-accent"}},[t._v("พิมพ์บาร์โค้ด")])],1),a("q-btn",{staticClass:"q-ma-xs",attrs:{glossy:"",round:"",icon:"clear",color:"red",size:"xs",disable:t.selectedItems<=0},on:{click:function(){return t.removeAllSelectedItem(i)}}},[a("q-tooltip",{attrs:{"content-class":"bg-red"}},[t._v("ลบรายการทั้งหมด")])],1)]}},{key:"body",fn:function(e){var i=e.props;return[a("q-btn",{staticClass:"q-ma-xs",attrs:{glossy:"",round:"",icon:"remove",color:"red",size:"xs"},on:{click:function(){return t.removeSelectedItem(i.row)}}},[a("q-tooltip",{attrs:{"content-class":"bg-red"}},[t._v("ลบรายการพิมพ์บาร์โค้ด")])],1)]}}]),model:{value:t.selectedItems,callback:function(e){t.selectedItems=e},expression:"selectedItems"}}),a("q-page-sticky",{staticClass:"z-top",attrs:{position:"top-right",offset:[0,0]}},[a("q-btn",{staticClass:"q-ma-xs",attrs:{"fab-mini":"",glossy:"",round:"",icon:"print",color:"accent",size:"xs",disable:t.selectedItems<=0},on:{click:function(){return t.printAllSelectedItem({})}}})],1),a("div",{staticClass:"q-pa-none fit row wrap justify-center items-center content-start",attrs:{id:"print"}},[t.selectedItems.length>0?a("div",{staticClass:"q-pa-md row wrap justify-start items-end content-start",staticStyle:{width:"780px",border:"1px solid black"},attrs:{id:"printBorder"}},t._l(t.barcodeItems,(function(e){return a("div",{key:e.key,staticClass:"q-pa-xs text-center",staticStyle:{overflow:"auto"}},[t.displayName?a("div",{staticClass:"text-bold",style:"width: "+t.barcodeWidth+"px;"},[t._v(t._s(e.name)+"\n        ")]):t._e(),t.displayPrice?a("div",{staticClass:"text-bold",staticStyle:{"font-size":"larger"}},[t._v(t._s((+e.price||0).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits}))+" "+t._s("บาท")+"\n        ")]):t._e(),a("svg",{class:"class-"+e.id})])})),0):t._e()])],1)},s=[],n=(a("99af"),a("c740"),a("4160"),a("caad"),a("13d5"),a("a434"),a("b0c0"),a("cca6"),a("ac1f"),a("2532"),a("1276"),a("159b"),a("ec67")),o=a("1732"),r=a("a57a"),l=a.n(r),c={name:"PagePrintBarcode",data:function(){return{productColumns:[{name:"id",label:"รหัสสินค้า",field:"id",sortable:!0,edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"barcode",label:"บาร์โค้ด",field:"barcode",sortable:!0,edit:{type:"text",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"typeId",label:"ประเภทสินค้า",field:"typeId",sortable:!0,classes:"text-center",edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"unitId",label:"หน่วยนับ",field:"unitId",sortable:!0,classes:"text-center",edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"name",label:"ชื่อสินค้า",field:"name",sortable:!0,classes:"text-left",edit:{type:"text",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"cost",label:"ราคาทุน",field:"cost",sortable:!0,edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"price",label:"ราคาขาย",field:"price",sortable:!0,edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"quantity",label:"คงเหลือ",field:"quantity",sortable:!0,edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"printsPerItem",label:"จำนวนบาร์โค้ด",field:"printsPerItem",sortable:!0,classes:"text-green-10",edit:{type:"number",inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],selectedItems:[],isRequireLoadDataProducts:!1,displayName:!0,displayPrice:!0,displayBarcode:!0,barcodeWidth:150,barcodeHeight:40,printsPerItem:1}},components:{JsonTable:n["a"]},beforeCreate:function(){this.UID=Object(o["a"])()},computed:{settings:{get:function(){return this.$global.data.settings||{}}},barcodeItems:function(){var t=this;return this.selectedItems.reduce((function(e,a){for(var i=1;i<=a.printsPerItem;i++)e.push(Object.assign({},a,{key:"".concat(a.id,"-").concat(i)}));return t.renderBarcode(),e}),[])}},watch:{"$global.data.modify":function(t,e){t.request&&t.request.query&&t.request.query.uid!==this.UID&&(t.request.path.split("/").includes("products")||t.request.path.split("/").includes("types")||t.request.path.split("/").includes("units"))&&(this.$global.data.panelModel===this.$options.name?this.$refs.productsRef.onRequest():this.isRequireLoadDataProducts||(this.isRequireLoadDataProducts=!0))},"$global.data.panelModel":function(t,e){t===this.$options.name&&this.isRequireLoadDataProducts&&(this.isRequireLoadDataProducts=!1,this.$refs.productsRef.onRequest())},displayBarcode:function(t,e){this.renderBarcode(!0)},barcodeWidth:function(t,e){this.setBarcodeWidth()},barcodeHeight:function(t,e){this.renderBarcode(!0)}},methods:{addSelectedItem:function(t){if(t){var e=this.selectedItems.findIndex((function(e){return e.id===t.id}));e>=0?(this.selectedItems.splice(e,1,t),t.printsPerItem=(t.printsPerItem||0)+this.printsPerItem):(this.selectedItems.splice(this.selectedItems.length,0,t),this.$set(t,"printsPerItem",this.printsPerItem)),t.hasRender=!1}},removeSelectedItem:function(t){if(t){var e=this.selectedItems.findIndex((function(e){return e.id===t.id}));e>=0&&this.selectedItems.splice(e,1)}},removeAllSelectedItem:function(t){t&&this.selectedItems.splice(0,this.selectedItems.length)},printAllSelectedItem:function(t){var e=this;t&&this.selectedItems.length>0&&(this.printBorderVisibility(!1),this.$global.print("#print",this.settings.name,(function(){return e.printBorderVisibility(!0)})))},selectOnFocus:function(t){t&&t.target&&"function"===typeof t.target.select&&t.target.select()},setBarcodeWidth:function(){var t=this;this.$nextTick((function(){document.querySelectorAll("svg[class^=class-]").forEach((function(e){e.setAttribute("width",t.barcodeWidth),e.removeAttribute("height")}))}))},renderBarcode:function(t){var e=this;this.$nextTick((function(){e.selectedItems.length>0&&(e.selectedItems.forEach((function(a){(!0===t||!a.hasRender&&(a.hasRender=!0))&&l()(".class-".concat(a.id),a.barcode,{format:"CODE128",font:"Sarabun",fontOptions:"bold",fontSize:20,margin:10,textMargin:2,width:2,height:e.barcodeHeight,displayValue:e.displayBarcode}).render()})),e.setBarcodeWidth())}))},printBorderVisibility:function(t){document.getElementById("printBorder").style.borderColor=t?"black":"transparent"}}},d=c,u=a("2877"),p=a("9c40"),f=a("05c0"),h=a("8f8e"),m=a("2c91"),g=a("27f9"),b=a("de5e"),y=a("eebe"),v=a.n(y),x=Object(u["a"])(d,i,s,!1,null,null,null);e["a"]=x.exports;v()(x,"components",{QBtn:p["a"],QTooltip:f["a"],QCheckbox:h["a"],QSpace:m["a"],QInput:g["a"],QPageSticky:b["a"]})},ec67:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md q-gutter-md"},[a("q-table",{attrs:{"binary-state-sort":"","row-key":"id",selection:"single",separator:"cell",title:t.title,data:t.data,pagination:t.pagination,loading:t.loading,columns:t.columns,filter:t.filter,"hide-pagination":t.hidePagination,"table-class":["sticky-column-table",t.classes||""],"table-header-class":["sticky-column-table","text-bold",t.headerClasses||t.classes||""],"title-class":["text-bold",t.headerClasses||t.classes||""],selected:t.selectedRows},on:{"update:title":function(e){t.title=e},"update:data":function(e){t.data=e},"update:pagination":function(e){t.pagination=e},"update:loading":function(e){t.loading=e},"update:columns":function(e){t.columns=e},"update:filter":function(e){t.filter=e},"update:hidePagination":function(e){t.hidePagination=e},"update:hide-pagination":function(e){t.hidePagination=e},"update:selected":function(e){t.selectedRows=e},request:function(e){return t.onRequest(e)}},scopedSlots:t._u([{key:"top-right",fn:function(e){return[t.hideSearchButton?t._e():a("q-input",{attrs:{dense:"",clearable:"",counter:"",debounce:"1000",placeholder:"ค้นหา"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}}),a("q-tooltip",{attrs:{"content-class":"bg-purple"}},[t._v("ค้นหาข้อมูล")])]},proxy:!0}],null,!0),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t.hideRefreshButton?t._e():a("q-btn",{staticClass:"q-ma-xs",attrs:{glossy:"",round:"",icon:"refresh",color:"green",size:"xs"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),function(){return t.onRequest(t.initialPagination)}()}}},[a("q-tooltip",{attrs:{"content-class":"bg-green"}},[t._v("รีเฟรชข้อมูล")])],1),t.hideAddButton?t._e():a("q-btn",{staticClass:"q-ma-xs",attrs:{glossy:"",round:"",icon:"add",color:"orange",size:"xs"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),function(){return t.addRow()}()}}},[a("q-tooltip",{attrs:{"content-class":"bg-orange"}},[t._v("เพิ่มข้อมูล")])],1),t._t("header",null,{props:e})]}},{key:"header",fn:function(e){return[a("q-tr",{attrs:{props:e}},[t.showSelectedRows?a("q-th",{class:["text-bold bg-grey-5",t.headerClasses||t.classes||""],staticStyle:{"text-align":"center"},attrs:{"auto-width":!0}}):t._e(),t._l(e.cols,(function(i){return a("q-th",{key:i.name,class:["text-bold bg-grey-4",t.headerClasses||t.classes||"",i.headerClasses||""],staticStyle:{"text-align":"center"},attrs:{props:e,"auto-width":!0}},[a("span",{class:["text-bold bg-grey-4",t.headerClasses||t.classes||"",i.headerClasses||""]},[t._v("\n            "+t._s(i.label)+"\n          ")])])})),a("q-dialog",{ref:"editDialogRef",attrs:{persistent:""},on:{input:function(e){return t.dialogVisible=e}}},[a("q-card",{style:t.dialogStyle},[a("q-card-section",{staticClass:"q-pa-none",staticStyle:{cursor:"grab","min-width":"500px"}},[a("q-bar",{directives:[{name:"touch-pan",rawName:"v-touch-pan.mouse",value:t.onPanDialog,expression:"onPanDialog",modifiers:{mouse:!0}}],staticClass:"bg-primary text-white"},[a("div",[t._v(t._s(t.title))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1)],1),a("q-card-section",{staticClass:"q-px-xl"},t._l(e.cols,(function(e){return a("div",{key:e.name},["text"===e.edit.type||"textarea"===e.edit.type||"password"===e.edit.type?a("div",[e.edit.readonly?t._e():a("q-input",{ref:e.name+"-ref",refInFor:!0,attrs:{type:e.edit.type,dense:"",counter:"","stack-label":"",label:e.label,readonly:e.edit.readonly,"input-class":e.edit.inputClass,prefix:e.edit.prefix,suffix:e.edit.suffix,rules:[function(a){return t.validateData(a,e,t.editedRow,!0)}]},on:{focus:function(e){return t.selectOnFocus(e)},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.preventDefault(),a.stopPropagation(),function(a){return t.dialogInputEnterKey(a,e.name+"-ref")}(a))}},model:{value:t.editedRow[e.name],callback:function(a){t.$set(t.editedRow,e.name,a)},expression:"editedRow[col.name]"}})],1):t._e(),"number"===e.edit.type||"decimal"===e.edit.type?a("div",[e.name.endsWith("Id")?a("div",[e.edit.readonly&&t.editedRow.id?t._e():a("q-select",{ref:e.name+"-ref",refInFor:!0,attrs:{dense:"",counter:"","stack-label":"",label:e.label,readonly:e.edit.readonly&&!!t.editedRow.id,"input-class":e.edit.inputClass||"text-right","input-debounce":1e3,prefix:e.edit.prefix,suffix:e.edit.suffix,rules:[function(a){return t.validateData(a,e,t.editedRow,!0)}],options:t.filterOptions[e.name.slice(0,-2)+"s"],"option-label":function(a){return(("object"!==typeof a?a=t.editedRow[e.name.slice(0,-2)]:a)||{name:""}).name},"option-value":"id","emit-value":"","map-options":"","use-input":"","fill-input":"","hide-selected":""},on:{filter:function(a,i,s){return t.filterFnAutoSelect(a,i,s,e.name.slice(0,-2)+"s")},"filter-abort":t.abortFilterFn,input:function(a){return t.editedRow[""+e.name.slice(0,-2)]=t.filterOptions[e.name.slice(0,-2)+"s"].find((function(t){return t.id===a})),t.$emit("input-select",e,t.editedRow)},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.preventDefault(),a.stopPropagation(),function(a){return t.dialogInputEnterKey(a,e.name+"-ref")}(a))}},model:{value:t.editedRow[e.name],callback:function(a){t.$set(t.editedRow,e.name,t._n(a))},expression:"editedRow[col.name]"}})],1):a("div",[e.edit.readonly?t._e():a("q-input",{ref:e.name+"-ref",refInFor:!0,attrs:{type:"number",dense:"",counter:"","stack-label":"",label:e.label,readonly:e.edit.readonly,"input-class":e.edit.inputClass||"text-right",prefix:e.edit.prefix,suffix:e.edit.suffix,rules:[function(a){return t.validateData(a,e,t.editedRow,!0)}]},on:{focus:function(e){return t.selectOnFocus(e)},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.preventDefault(),a.stopPropagation(),function(a){return t.dialogInputEnterKey(a,e.name+"-ref")}(a))}},model:{value:t.editedRow[e.name],callback:function(a){t.$set(t.editedRow,e.name,t._n(a))},expression:"editedRow[col.name]"}})],1)]):t._e(),"datetime"===e.edit.type?a("div",[e.edit.readonly?t._e():a("q-input",{ref:e.name+"-ref",refInFor:!0,attrs:{value:t.bindDateTime(t.editedRow[e.name]),type:"datetime-local",dense:"",counter:"","stack-label":"",label:e.label,readonly:e.edit.readonly,"input-class":e.edit.inputClass,prefix:e.edit.prefix,suffix:e.edit.suffix,rules:[function(a){return t.validateData(a,e,t.editedRow,!0)}]},on:{input:function(a){return t.editedRow[e.name]=t.eventDateTime(a)},focus:function(e){return t.selectOnFocus(e)},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:(a.preventDefault(),a.stopPropagation(),function(a){return t.dialogInputEnterKey(a,e.name+"-ref")}(a))}}})],1):t._e()])})),0),a("q-card-actions",{staticClass:"q-pb-md q-gutter-md row justify-evenly"},[a("q-btn",{attrs:{glossy:"",color:"primary",label:"ยกเลิก"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),function(){return t.setShowEditDialog(!1)}()}}}),a("q-btn",{attrs:{glossy:"",color:"secondary",label:"บันทึก",disable:t.dialogVisible&&t.buttonValidateDisable},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),function(){return t.updateRow(t.editedRow)}()}}})],1)],1)],1)],2)]}},{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[t.showSelectedRows?a("q-td",{attrs:{"auto-width":!0}},[a("q-checkbox",{class:[t.classes||""],model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1):t._e(),t._l(e.cols,(function(i){return a("q-td",{key:i.name,attrs:{props:e,"auto-width":!0}},[a("div",{class:[t.classes||"",i.classes||""]},["text"===i.edit.type||"textarea"===i.edit.type||"password"===i.edit.type?a("div",[t._v("\n              "+t._s(t.getCellDisplay(e.row,i))+"\n\n              "),i.edit.readonly?t._e():a("q-popup-proxy",{on:{input:function(e){return t.popupVisible=e},"before-show":function(a){return"undefined"===typeof e.row["__"+i.name+"__"]&&t.$set(e.row,"__"+i.name+"__",e.row[i.name])},hide:function(t){return delete e.row["__"+i.name+"__"]}}},[a("div",{staticClass:"q-pa-md",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"text-center text-h6 text-primary",staticStyle:{"text-decoration":"underline"}},[t._v("\n                    "+t._s("แก้ไข"+i.label)+"\n                  ")]),a("q-input",{ref:i.name+"-ref",refInFor:!0,attrs:{type:i.edit.type,autofocus:"",dense:"",counter:"","stack-label":"",label:i.label,readonly:i.edit.readonly,"input-class":i.edit.inputClass,prefix:i.edit.prefix,suffix:i.edit.suffix,rules:[function(a){return t.validateData(a,i,e.row)}]},on:{focus:function(e){return t.selectOnFocus(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),function(e){return t.popupEditEnterKey(e)}(e))}},model:{value:e.row["__"+i.name+"__"],callback:function(a){t.$set(e.row,"__"+i.name+"__",a)},expression:"props.row[`__${col.name}__`]"}}),a("div",{staticClass:"q-gutter-md row justify-evenly"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",color:"primary",label:"ยกเลิก"},on:{click:function(t){t.preventDefault(),t.stopPropagation()}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",color:"secondary",label:"บันทึก",disable:t.popupVisible&&(t.buttonValidateDisable||e.row["__"+i.name+"__"]===e.row[i.name])},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),function(){return e.row[i.name]=e.row["__"+i.name+"__"],t.updateCell(e.row,i)}()}}})],1)],1)])],1):"number"===i.edit.type||"decimal"===i.edit.type?a("div",[i.name.endsWith("Id")?a("div",[t._v("\n                "+t._s(t.getCellDisplay(e.row,i))+"\n\n                "),i.edit.readonly?t._e():a("q-popup-proxy",{on:{input:function(e){return t.popupVisible=e},"before-show":function(a){return"undefined"===typeof e.row["__"+i.name+"__"]&&t.$set(e.row,"__"+i.name+"__",e.row[i.name])},hide:function(t){return delete e.row["__"+i.name+"__"]}}},[a("div",{staticClass:"q-pa-md",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"text-center text-h6 text-primary",staticStyle:{"text-decoration":"underline"}},[t._v("\n                      "+t._s("แก้ไข"+i.label)+"\n                    ")]),a("q-select",{ref:i.name+"-ref",refInFor:!0,attrs:{autofocus:"",dense:"",counter:"","stack-label":"",label:i.label,readonly:i.edit.readonly,"input-class":i.edit.inputClass||"text-right","input-debounce":1e3,prefix:i.edit.prefix,suffix:i.edit.suffix,rules:[function(a){return t.validateData(a,i,e.row)}],options:t.filterOptions[i.name.slice(0,-2)+"s"],"option-label":function(t){return(("object"!==typeof t?t=e.row[i.name.slice(0,-2)]:t)||{name:""}).name},"option-value":"id","emit-value":"","map-options":"","use-input":"","fill-input":"","hide-selected":""},on:{filter:function(e,a,s){return t.filterFnAutoSelect(e,a,s,i.name.slice(0,-2)+"s")},"filter-abort":t.abortFilterFn,input:function(a){return t.$emit("input-select",i,e.row)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),function(e){return t.popupEditEnterKey(e)}(e))}},model:{value:e.row["__"+i.name+"__"],callback:function(a){t.$set(e.row,"__"+i.name+"__",t._n(a))},expression:"props.row[`__${col.name}__`]"}}),a("div",{staticClass:"q-gutter-md row justify-evenly"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",color:"primary",label:"ยกเลิก"},on:{click:function(t){t.preventDefault(),t.stopPropagation()}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",color:"secondary",label:"บันทึก",disable:t.popupVisible&&(t.buttonValidateDisable||e.row["__"+i.name+"__"]===e.row[i.name])},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),function(){return e.row[i.name]=e.row["__"+i.name+"__"],e.row[i.name.slice(0,-2)]=t.filterOptions[i.name.slice(0,-2)+"s"].find((function(t){return t.id===e.row[i.name]})),t.updateCell(e.row,i)}()}}})],1)],1)])],1):a("div",[t._v("\n                "+t._s(t.getCellDisplay(e.row,i))+"\n\n                "),i.edit.readonly?t._e():a("q-popup-proxy",{on:{input:function(e){return t.popupVisible=e},"before-show":function(a){return"undefined"===typeof e.row["__"+i.name+"__"]&&t.$set(e.row,"__"+i.name+"__",e.row[i.name])},hide:function(t){return delete e.row["__"+i.name+"__"]}}},[a("div",{staticClass:"q-pa-md",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"text-center text-h6 text-primary",staticStyle:{"text-decoration":"underline"}},[t._v("\n                      "+t._s("แก้ไข"+i.label)+"\n                    ")]),a("q-input",{ref:i.name+"-ref",refInFor:!0,attrs:{type:"number",autofocus:"",dense:"",counter:"","stack-label":"",label:i.label,readonly:i.edit.readonly,"input-class":i.edit.inputClass||"text-right",prefix:i.edit.prefix,suffix:i.edit.suffix,rules:[function(a){return t.validateData(a,i,e.row)}]},on:{focus:function(e){return t.selectOnFocus(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),function(e){return t.popupEditEnterKey(e)}(e))}},model:{value:e.row["__"+i.name+"__"],callback:function(a){t.$set(e.row,"__"+i.name+"__",t._n(a))},expression:"props.row[`__${col.name}__`]"}}),a("div",{staticClass:"q-gutter-md row justify-evenly"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",color:"primary",label:"ยกเลิก"},on:{click:function(t){t.preventDefault(),t.stopPropagation()}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",color:"secondary",label:"บันทึก",disable:t.popupVisible&&(t.buttonValidateDisable||e.row["__"+i.name+"__"]===e.row[i.name])},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),function(){return e.row[i.name]=e.row["__"+i.name+"__"],t.updateCell(e.row,i)}()}}})],1)],1)])],1)]):t._e(),"datetime"===i.edit.type?a("div",[t._v("\n              "+t._s(t.getCellDisplay(e.row,i))+"\n\n              "),i.edit.readonly?t._e():a("q-popup-proxy",{on:{input:function(e){return t.popupVisible=e},"before-show":function(a){return"undefined"===typeof e.row["__"+i.name+"__"]&&t.$set(e.row,"__"+i.name+"__",e.row[i.name])},hide:function(t){return delete e.row["__"+i.name+"__"]}}},[a("div",{staticClass:"q-pa-md",staticStyle:{"min-width":"300px"}},[a("div",{staticClass:"text-center text-h6 text-primary",staticStyle:{"text-decoration":"underline"}},[t._v("\n                    "+t._s("แก้ไข"+i.label)+"\n                  ")]),a("q-input",{ref:i.name+"-ref",refInFor:!0,attrs:{value:t.bindDateTime(e.row["__"+i.name+"__"]),type:"datetime-local",autofocus:"",dense:"",counter:"","stack-label":"",label:i.label,readonly:i.edit.readonly,"input-class":i.edit.inputClass,prefix:i.edit.prefix,suffix:i.edit.suffix,rules:[function(a){return t.validateData(a,i,e.row)}]},on:{input:function(a){return e.row["__"+i.name+"__"]=t.eventDateTime(a)},focus:function(e){return t.selectOnFocus(e)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),function(e){return t.popupEditEnterKey(e)}(e))}}}),a("div",{staticClass:"q-gutter-md row justify-evenly"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",color:"primary",label:"ยกเลิก"},on:{click:function(t){t.preventDefault(),t.stopPropagation()}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{glossy:"",color:"secondary",label:"บันทึก",disable:t.popupVisible&&(t.buttonValidateDisable||e.row["__"+i.name+"__"]===e.row[i.name])},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),function(){return e.row[i.name]=e.row["__"+i.name+"__"],t.updateCell(e.row,i)}()}}})],1)],1)])],1):"actions"===i.name||"actions"===i.edit.type?a("div",{staticClass:"text-center"},[t.hideEditButton?t._e():a("q-btn",{staticClass:"q-ma-xs",attrs:{glossy:"",round:"",icon:"edit",color:"blue",size:"xs"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),function(){return t.editRow(e.row)}()}}},[a("q-tooltip",{attrs:{"content-class":"bg-blue"}},[t._v("แก้ไขข้อมูล")])],1),t.hideRemoveButton?t._e():a("q-btn",{staticClass:"q-ma-xs",attrs:{glossy:"",round:"",icon:"remove",color:"red",size:"xs"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),function(){return t.removeRow(e.row)}()}}},[a("q-tooltip",{attrs:{"content-class":"bg-red"}},[t._v("ลบข้อมูล")])],1),t._t("body",null,{props:e})],2):t._e()])])}))],2)]}},{key:"pagination",fn:function(e){return[a("div",{staticClass:"q-px-sm"},[t._v("\n        "+t._s(t.$q.lang.table.allRows+": "+t.pagination.rowsNumber)+"\n      ")]),a("q-btn",{attrs:{icon:"skip_previous",color:"primary",dense:"",flat:"",disable:e.isFirstPage},on:{click:e.firstPage}}),a("q-btn",{attrs:{icon:"fast_rewind",color:"primary",dense:"",flat:"",disable:e.isFirstPage},on:{click:e.prevPage}}),a("q-select",{staticClass:"q-px-sm",attrs:{borderless:"","hide-dropdown-icon":"","options-dense":"",dense:"",flat:"",options:t.pageOptions,"display-value":t.pagination.page+" - "+t.pagesNumber},on:{input:function(e){return t.onRequest()}},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}}),a("q-btn",{attrs:{icon:"fast_forward",color:"primary",dense:"",flat:"",disable:e.isLastPage},on:{click:e.nextPage}}),a("q-btn",{attrs:{icon:"skip_next",color:"primary",dense:"",flat:"",disable:e.isLastPage},on:{click:e.lastPage}}),t._t("footer",null,{props:e})]}}],null,!0)})],1)},s=[],n=(a("99af"),a("a623"),a("4de4"),a("7db0"),a("c740"),a("a630"),a("caad"),a("c975"),a("fb6a"),a("45fc"),a("b0c0"),a("a9e3"),a("cca6"),a("b64b"),a("d3b7"),a("e6cf"),a("ac1f"),a("25f0"),a("8a79"),a("2532"),a("3ca3"),a("5319"),a("1276"),a("2ca0"),a("498a"),a("9523")),o=a.n(n),r=a("7037"),l=a.n(r),c=a("6374"),d=a.n(c),u={name:"JsonTable",model:{prop:"rows",event:"rows"},props:{title:{type:String,default:""},baseUrl:{type:String,default:""},query:{type:String,default:""},table:{type:String,default:""},classes:{type:String,default:""},headerClasses:{type:String,default:""},params:{type:Object,default:function(){}},columns:{type:Array,default:function(){return[]}},rows:{type:Array,default:function(){return[]}},selected:{type:Array,default:function(){return[]}},rowsPerPage:{type:Number,default:10},hidePagination:{type:Boolean,default:!1},hideSearchButton:{type:Boolean,default:!1},hideRefreshButton:{type:Boolean,default:!1},hideAddButton:{type:Boolean,default:!1},hideEditButton:{type:Boolean,default:!1},hideRemoveButton:{type:Boolean,default:!1},showEditDialog:{type:Boolean,default:!1},showSelectedRows:{type:Boolean,default:!1},autoSelectRow:{type:Boolean,default:!0},onInitAddData:{type:Function,default:function(){}},onInitEditData:{type:Function,default:function(){}},onValidateData:{type:Function,default:function(){}},onBeforeLoadData:{type:Function,default:function(){}},onAfterLoadData:{type:Function,default:function(){}},onBeforeUpdateData:{type:Function,default:function(){}},onAfterUpdateData:{type:Function,default:function(){}},onBeforeRemoveData:{type:Function,default:function(){}},onAfterRemoveData:{type:Function,default:function(){}}},data:function(){return{loading:!1,buttonValidateDisable:!0,dialogVisible:!1,popupVisible:!1,isNewRow:!0,filter:void 0,pageOptions:[],data:[],selectedRows:[],argsRequireLoadData:[],initialPagination:{pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:this.rowsPerPage,rowsNumber:0},filter:void 0},pagination:{sortBy:"id",descending:!0,page:1,rowsPerPage:this.rowsPerPage,rowsNumber:0},inputRefs:{},validateInputs:{},selectOptions:{},filterOptions:{},editedRow:{},dialogPos:{x:0,y:0}}},computed:{settings:function(){return this.$global.data.settings||{}},pagesNumber:function(){return this.pagination.rowsPerPage>0?Math.ceil(this.pagination.rowsNumber/this.pagination.rowsPerPage):1},dialogStyle:function(){return{transform:"translate(".concat(this.dialogPos.x,"px, ").concat(this.dialogPos.y,"px)")}}},watch:{query:function(t,e){this.onRequest(this.initialPagination)},rows:function(t,e){this.onBeforeLoadData("",t)||(this.data=t,this.$emit("update:rows",[].concat(this.data)),this.pagination.rowsNumber=this.data.length,this.pagination.page=1,this.pagination.rowsPerPage=this.rowsPerPage,this.pagination.sortBy=void 0,this.pagination.descending=void 0,this.onAfterLoadData("",this.data)||this.$emit("load-data",this.table,this.data))},selected:function(t,e){this.selectedRows=t},rowsPerPage:function(t,e){this.pagination.rowsPerPage=t},hidePagination:function(t,e){t?this.pagination.rowsPerPage=0:this.pagination.rowsPerPage<=0&&(this.pagination.rowsPerPage=10)},showEditDialog:function(t,e){this.setShowEditDialog(t)},loading:function(t,e){t?this.$q.loading.show():this.$q.loading.hide()},dialogVisible:function(t,e){var a=this;t?(this.validateInputs={},this.selectOptions={},this.$nextTick((function(){for(var t=Array.from(a.$refs.editDialogRef.$children[0].$el.querySelectorAll("input, textarea")||{}),e=Object.keys(a.$refs),i={},s=function(){var e=o[n],s=[].concat(a.$refs[e]),r=s[0].$refs.input||s[0].$refs.target,l=t.findIndex((function(t){return t===r}));l>=0&&(s[0].childIndex=l,i[l]=s[0])},n=0,o=e;n<o.length;n++)s();a.inputRefs=i,a.inputRefs[0]&&a.$nextTick((function(){return a.inputRefs[0].focus()}))}))):this.checkRequireLoadData()},popupVisible:function(t,e){t?(this.validateInputs={},this.selectOptions={}):this.checkRequireLoadData()},selectedRows:function(t,e){this.$emit("update:selected",t)}},mounted:function(){this.onRequest(this.initialPagination)},methods:{checkRequireLoadData:function(){this.argsRequireLoadData&&(this.onRequest.apply(this,this.argsRequireLoadData),this.argsRequireLoadData=void 0)},onRequest:function(t,e){var a=this;if(this.dialogVisible||this.popupVisible)return this.argsRequireLoadData=arguments,void(this.loading=!1);if(!this.baseUrl||!this.table)return this.$emit("load-data",this.table,this.data),void(this.loading=!1);var i=Object.assign({},{pagination:this.pagination,filter:this.filter},t),s=i.pagination,n=s.page,o=s.rowsPerPage,r=s.sortBy,l=s.descending,c=i.filter;if(this.pagination.page=n,this.pagination.rowsPerPage=o,this.pagination.sortBy=r,this.pagination.descending=l,this.filter===c){var d="".concat(this.baseUrl,"/").concat(this.table,"?_sort=").concat(r,"&_order=").concat(l?"desc":"asc").concat(o&&o>0?"&_limit="+o+"&_page="+n:"").concat(c&&c.trim()?"&q="+c.trim():"").concat(this.query&&this.query.trim()?"&"+this.query.trim():"");this.loading=!0,this.$jsonFetch.get(d,{params:this.params}).then((function(t){if(a.onBeforeLoadData(d,t.data))a.loading=!1;else if(a.data=t.data,a.$emit("update:rows",[].concat(a.data)),a.pagination.rowsNumber=t.headers["x-total-count"]||t.data.length,a.pageOptions=a.range(1,a.pagesNumber),a.onAfterLoadData(d,a.data))a.loading=!1;else{if(a.$emit("load-data",a.table,a.data),a.showSelectedRows){!e&&a.selectedRows.length>0&&(e=a.selectedRows[0].id);var i=a.data.find((function(t){return t.id===e}))||(a.autoSelectRow&&a.data.length>0?a.data[0]:void 0);a.selectedRows=i?[i]:[]}a.loading=!1}})).catch((function(t){a.loading=!1}))}else this.filter=c},setDefaultData:function(){var t,e=d()(this.columns);try{for(e.s();!(t=e.n()).done;){var a=t.value;"object"===l()(a)&&"string"===typeof a.name&&"object"===l()(a.edit)&&"actions"!==a.name&&void 0===this.editedRow[a.name]&&("text"===a.edit.type||"textarea"===a.edit.type||"password"===a.edit.type||"datetime"===a.edit.type?this.editedRow[a.name]="":"number"!==a.edit.type&&"decimal"!==a.edit.type||(this.editedRow[a.name]=0))}}catch(i){e.e(i)}finally{e.f()}},setShowEditDialog:function(t){t?this.$refs.editDialogRef.show():this.$refs.editDialogRef.hide()},addRow:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isNewRow=!0,this.editedRow=JSON.parse(JSON.stringify(this.editedRow)),this.setDefaultData(),delete this.editedRow.id,!this.onInitAddData(this.editedRow)&&t&&this.setShowEditDialog(!0),this.editedRow=Object.assign({},this.editedRow)},editRow:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.isNewRow=!1,this.editedRow=JSON.parse(JSON.stringify(t)),this.setDefaultData(),!this.onInitEditData(this.editedRow)&&e&&this.setShowEditDialog(!0),this.editedRow=Object.assign({},this.editedRow)},updateRow:function(t){var e=this;if(this.baseUrl&&this.table){if(!0===this.validateData(void 0,void 0,t,!0)){if(this.setDefaultData(),this.isNewRow){delete t.id;var a="".concat(this.baseUrl,"/").concat(this.table);Promise.resolve(this.onBeforeUpdateData(a,t)).then((function(i){i?e.loading=!1:(e.loading=!0,e.$jsonFetch.post(a,e.shallowCopy(t),{params:e.params}).then((function(i){i.data.id&&!t.id&&e.$set(t,"id",i.data.id),Promise.resolve(e.onAfterUpdateData(a,t,i.data)).then((function(a){a?e.loading=!1:(e.$emit("add-row",e.table,t,i.data),e.$q.notify({type:"positive",message:t.name?"ข้อมูล ".concat(t.name," (รหัส ").concat(t.id,") ได้เพิ่มเรียบร้อยแล้ว"):"ข้อมูลรหัส ".concat(t.id," ใน ").concat(e.table," ได้เพิ่มเรียบร้อยแล้ว")}),e.onRequest(e.initialPagination,t.id))})).catch((function(t){e.loading=!1}))})).catch((function(t){e.loading=!1})))})).catch((function(t){e.loading=!1}))}else{var i="".concat(this.baseUrl,"/").concat(this.table,"/").concat(t.id);Promise.resolve(this.onBeforeUpdateData(i,t)).then((function(a){a?e.loading=!1:(e.loading=!0,e.$jsonFetch.put(i,e.shallowCopy(t),{params:e.params}).then((function(a){Promise.resolve(e.onAfterUpdateData(i,t,a.data)).then((function(i){i?e.loading=!1:(e.$emit("update-row",e.table,t,a.data),e.$q.notify({type:"positive",message:t.name?"ข้อมูล ".concat(t.name," (รหัส ").concat(t.id,") ได้แก้ไขเรียบร้อยแล้ว"):"ข้อมูลรหัส ".concat(t.id," ใน ").concat(e.table," ได้แก้ไขเรียบร้อยแล้ว")}),e.onRequest(void 0,t.id))})).catch((function(t){e.loading=!1}))})).catch((function(t){e.loading=!1})))})).catch((function(t){e.loading=!1}))}this.setShowEditDialog(!1)}}else this.isNewRow?this.$emit("add-row",this.table,t):this.$emit("update-row",this.table,t)},updateCell:function(t,e){var a=this;if(this.baseUrl&&this.table){if(e&&e.edit){if(!0!==this.validateData(t[e.name],e,t))return;"number"!==e.edit.type&&"decimal"!==e.edit.type||isNaN(t[e.name])||(t[e.name]=+(t[e.name]||0))}var i="".concat(this.baseUrl,"/").concat(this.table,"/").concat(t.id),s=this.shallowCopy(t);Promise.resolve(this.onBeforeUpdateData(i,t)).then((function(n){if(n)a.loading=!1;else{var r=o()({},e.name,t[e.name]);for(var c in s)"object"===l()(t[c])&&null!==t[c]||t[c]===s[c]||(r[c]=t[c]);a.loading=!0,a.$jsonFetch.patch(i,a.shallowCopy(r),{params:a.params}).then((function(s){Promise.resolve(a.onAfterUpdateData(i,t,s.data)).then((function(i){i?a.loading=!1:(a.$emit("update-cell",a.table,t,e,s.data),a.$q.notify({type:"positive",message:t.name?"ข้อมูล ".concat(t.name," (รหัส ").concat(t.id,") ได้แก้ไขเรียบร้อยแล้ว"):"ข้อมูลรหัส ".concat(t.id," ใน ").concat(a.table," ได้แก้ไขเรียบร้อยแล้ว")}),a.onRequest(void 0,t.id))})).catch((function(t){a.loading=!1}))})).catch((function(t){a.loading=!1}))}})).catch((function(t){a.loading=!1}))}else this.$emit("update-cell",this.table,t,e)},removeRow:function(t){var e=this;this.baseUrl&&this.table?this.$q.dialog({title:"การลบข้อมูล",message:"กรุณายืนยันการลบข้อมูลของ ".concat(t.name||""," (รหัส ").concat(t.id,") ?"),ok:{glossy:!0,push:!0,color:"negative",label:"ยืนยันการลบ"},cancel:{glossy:!0,push:!0,color:"primary",label:"ยกเลิก"},focus:"cancel"}).onOk((function(){var a="".concat(e.baseUrl,"/").concat(e.table,"/").concat(t.id);Promise.resolve(e.onBeforeRemoveData(a,t)).then((function(i){i?e.loading=!1:(e.loading=!0,e.$jsonFetch.delete(a,void 0,{params:e.params}).then((function(i){Promise.resolve(e.onAfterRemoveData(a,t,i.data)).then((function(a){a?e.loading=!1:(e.$emit("remove-row",e.table,t,i.data),e.$q.notify({type:"positive",message:t.name?"ข้อมูล ".concat(t.name," (รหัส ").concat(t.id,") ได้ลบเรียบร้อยแล้ว"):"ข้อมูลรหัส ".concat(t.id," ใน ").concat(e.table," ได้ลบเรียบร้อยแล้ว")}),e.onRequest())})).catch((function(t){e.loading=!1}))})).catch((function(t){e.loading=!1})))})).catch((function(t){e.loading=!1}))})):this.$emit("remove-row",this.table,t)},filterFnAutoSelect:function(t,e,a,i){var s,n=this;i&&"string"===typeof t?("undefined"===typeof this.selectOptions[i]&&(s=this.$jsonFetch.get("".concat(this.baseUrl,"/").concat(i,"?_sort=name&_order=asc&_limit=100&_expand=*"),{params:this.params}).then((function(t){n.selectOptions=Object.assign({},n.selectOptions,o()({},i,t.data))})).catch((function(t){n.selectOptions=Object.assign({},n.selectOptions,o()({},i,[]))}))),Promise.resolve(s).then((function(){if(t=t.replace(/[\\/^$.(){}[\]+*]/g,"").trim(),""===t)n.filterOptions=Object.assign({},n.filterOptions,o()({},i,n.selectOptions[i])),n.doneFilterFn(t,e,a,i);else{var s=t.toLowerCase();n.filterOptions=Object.assign({},n.filterOptions,o()({},i,n.selectOptions[i].filter((function(t){return t.name.toLowerCase().indexOf(s)>-1})))),n.filterOptions.length>0?n.doneFilterFn(t,e,a,i):n.$jsonFetch.get("".concat(n.baseUrl,"/").concat(i,"?_sort=name&_order=asc&_limit=100&_expand=*&name_like=").concat(s),{params:n.params}).then((function(s){n.filterOptions=Object.assign({},n.filterOptions,o()({},i,s.data)),n.doneFilterFn(t,e,a,i)})).catch((function(t){n.filterOptions=Object.assign({},n.filterOptions,o()({},i,[])),a()}))}}))):a()},doneFilterFn:function(t,e,a,i){e((function(){}),(function(e){""!==t&&e.options.length>0&&-1===e.optionIndex&&(e.moveOptionSelection(1,!0),e.toggleOption(e.options[e.optionIndex],!0))}))},abortFilterFn:function(){},getCellDisplay:function(t,e){var a;return"number"===e.edit.type||"decimal"===e.edit.type?(a=e.name.endsWith("Id")?(t[e.name.slice(0,-2)]||{}).name||t[e.name]:this.getCellValue(e,t)||0,"decimal"===e.edit.type&&(a=(+a||0).toLocaleString(void 0,{minimumFractionDigits:this.settings.fractionDigits,maximumFractionDigits:this.settings.fractionDigits}))):a=this.getCellValue(e,t),0===a&&"NaN"!==a||(a=a||" "),"".concat(e.edit.prefix).concat(a).concat(e.edit.suffix)},bindDateTime:function(t){return t=new Date(t),isNaN(t)&&(t=new Date),new Date(t.getTime()-60*t.getTimezoneOffset()*1e3).toISOString().split(".")[0]},eventDateTime:function(t){return t=new Date(t),isNaN(t)&&(t=new Date),t.toISOString()},getCellValue:function(t,e){var a="function"===typeof t.field?t.field(e):e[t.field];return"function"===typeof t.format?t.format(a,e):a},dialogInputEnterKey:function(t,e){var a=this;if("textarea"!==t.target.type){var i=this.$refs[e][0].childIndex;if(i>=0)if(i<Object.keys(this.inputRefs).length-1)"function"===typeof this.inputRefs[i].hidePopup&&this.inputRefs[i].hidePopup(),this.$nextTick((function(){return a.inputRefs[i+1].focus()}));else{var s=document.querySelector("body>div.q-dialog>div>div>div>button.q-btn:last-child:not([disabled])");s&&this.$nextTick((function(){return s.click()}))}}},popupEditEnterKey:function(t){if("textarea"!==t.target.type){var e=document.querySelector("body>div.q-menu>div>div>button.q-btn:last-child:not([disabled])");e&&this.$nextTick((function(){return e.click()}))}},selectOnFocus:function(t){t&&t.target&&"function"===typeof t.target.select&&t.target.select()},validateData:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0,n=!1;if(!0!==s||this.validateData.validateActive)n=a.name.includes(".")||this.onValidateData(t,a,i),void 0===n&&(n="text"===a.edit.type||"textarea"===a.edit.type||"password"===a.edit.type||"datetime"===a.edit.type?!!t||"ยังไม่ได้กำหนดข้อมูล":("number"===a.edit.type||"decimal"===a.edit.type)&&(t>=0||"ข้อมูลต้องมีค่ามากกว่าหรือเท่ากับ 0")),this.validateInputs[a.name]=n,!0!==s&&(this.buttonValidateDisable=!0!==n);else{for(var o in this.validateData.validateActive=!0,this.$refs)this.$refs[o].length>0&&this.$refs[o][0].validate();n=void 0===t&&void 0===a.name||this.validateInputs[a.name],this.buttonValidateDisable=Object.keys(this.validateInputs).some((function(t){return!0!==e.validateInputs[t]})),delete this.validateData.validateActive}return n},deepCompare:function(t,e){return Object.prototype.toString.call(t)===Object.prototype.toString.call(e)&&("[object Object]"===Object.prototype.toString.call(t)||"[object Array]"===Object.prototype.toString.call(t)?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every((function(a){return this.deepCompare(t[a],e[a])})):t===e)},deepCopy:function(t){if("object"!==l()(t))return t;if(null!==t){var e=Array.isArray(t)?[]:{};for(var a in t)e[a]=this.deepCopy(t[a]);return e}},shallowCopy:function(t){var e=Array.isArray(t)?[]:{};for(var a in t)("object"!==l()(t[a])||Array.isArray(t[a])||null===t[a])&&(a.startsWith("_")||a.includes(".")||(e[a]=t[a]));return e},onPanDialog:function(t){this.dialogPos={x:this.dialogPos.x+t.delta.x,y:this.dialogPos.y+t.delta.y}},range:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Array.from({length:(e-t)/a+1},(function(e,i){return t+i*a}))},_debug:function(){var t;(t=console).log.apply(t,arguments)}}},p=u,f=(a("613c"),a("2877")),h=a("eaac"),m=a("27f9"),g=a("0016"),b=a("05c0"),y=a("9c40"),v=a("bd08"),x=a("357e"),w=a("8f8e"),q=a("24e8"),_=a("f09f"),D=a("a370"),C=a("d847"),P=a("2c91"),R=a("ddd8"),S=a("4b7e"),$=a("db86"),k=a("7cbe"),I=a("4e73"),F=a("75c3"),U=a("7f67"),L=a("eebe"),T=a.n(L),j=Object(f["a"])(p,i,s,!1,null,null,null);e["a"]=j.exports;T()(j,"components",{QTable:h["a"],QInput:m["a"],QIcon:g["a"],QTooltip:b["a"],QBtn:y["a"],QTr:v["a"],QTh:x["a"],QCheckbox:w["a"],QDialog:q["a"],QCard:_["a"],QCardSection:D["a"],QBar:C["a"],QSpace:P["a"],QSelect:R["a"],QCardActions:S["a"],QTd:$["a"],QPopupProxy:k["a"],QMenu:I["a"]}),T()(j,"directives",{TouchPan:F["a"],ClosePopup:U["a"]})},f9ea:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("JsonTable",{ref:"aboutSettingsRef",attrs:{"base-url":this.$global.data.baseUrl,params:{uid:t.UID},table:"settings",title:"⭐ ข้อมูลกิจการ ⭐","hide-add-button":"","hide-remove-button":"","hide-pagination":"",classes:(t.$global.data.settings||{}).classes,columns:t.aboutColumns},on:{"update-row":t.updateHandler,"update-cell":t.updateHandler}}),a("JsonTable",{ref:"programSettingsRef",attrs:{"base-url":this.$global.data.baseUrl,params:{uid:t.UID},table:"settings",title:"⭐ ข้อมูลโปรแกรม ⭐","hide-add-button":"","hide-remove-button":"","hide-pagination":"",classes:(t.$global.data.settings||{}).classes,columns:t.settingColumns},on:{"update-row":t.updateHandler,"update-cell":t.updateHandler}})],1)},s=[],n=(a("99af"),a("caad"),a("b0c0"),a("cca6"),a("ac1f"),a("2532"),a("38cf"),a("1276"),a("ec67")),o=a("1732"),r={name:"PageSettings",data:function(){return{aboutColumns:[{name:"id",label:"รหัสกิจการ",field:"id",sortable:!0,classes:"hidden",headerClasses:"hidden",edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"name",label:"ชื่อกิจการ",field:"name",sortable:!0,classes:"text-green-10 text-center",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"address",label:"สถานที่ตั้ง - ที่อยู่",field:"address",sortable:!0,classes:"text-green-10 text-center",edit:{type:"textarea",inputClass:"",prefix:"",suffix:""}},{name:"telephone",label:"หมายเลขโทรศัพท์",field:"telephone",sortable:!0,classes:"text-green-10 text-center",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"email",label:"อีเมล์",field:"email",sortable:!0,classes:"text-green-10 text-center",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"password",label:"รหัสผ่าน",field:function(t){return"•".repeat((t.password||"").length)},sortable:!1,classes:"text-green-10 text-center",edit:{type:"password",inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],settingColumns:[{name:"id",label:"รหัสการตั้งค่า",field:"id",sortable:!0,classes:"hidden",headerClasses:"hidden",edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"quantityPurchase",label:"จำนวนซื้อเริ่มต้น",field:"quantityPurchase",sortable:!0,classes:"text-green-10 text-center",edit:{type:"number",inputClass:"",prefix:"",suffix:""}},{name:"quantitySale",label:"จำนวนขายเริ่มต้น",field:"quantitySale",sortable:!0,classes:"text-green-10 text-center",edit:{type:"number",inputClass:"",prefix:"",suffix:""}},{name:"profit",label:"กำไร",field:"profit",sortable:!0,classes:"text-green-10 text-center",edit:{type:"number",inputClass:"",prefix:"",suffix:"%"}},{name:"vatPurchase",label:"ภาษีซื้อ",field:"vatPurchase",sortable:!0,classes:"text-green-10 text-center",edit:{type:"number",inputClass:"",prefix:"",suffix:"%"}},{name:"vatSale",label:"ภาษีขาย",field:"vatSale",sortable:!0,classes:"text-green-10 text-center",edit:{type:"number",inputClass:"",prefix:"",suffix:"%"}},{name:"fractionDigits",label:"จุดทศนิยม",field:"fractionDigits",sortable:!0,classes:"text-green-10 text-center",edit:{type:"number",inputClass:"",prefix:"",suffix:""}},{name:"classes",label:"Cascading Style Sheets",field:"classes",sortable:!0,classes:"text-green-10 text-center",edit:{type:"text",inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],isRequireLoadDataSettings:!1}},components:{JsonTable:n["a"]},beforeCreate:function(){this.UID=Object(o["a"])()},watch:{"$global.data.modify":function(t,e){t.request&&t.request.query&&t.request.query.uid!==this.UID&&t.request.path.split("/").includes("settings")&&(this.$global.data.panelModel===this.$options.name?(this.$refs.aboutSettingsRef.onRequest(),this.$refs.programSettingsRef.onRequest(),t.response.body&&this.updateHandler("",t.response.body)):this.isRequireLoadDataSettings||(this.isRequireLoadDataSettings=!0))},"$global.data.panelModel":function(t,e){t===this.$options.name&&this.isRequireLoadDataSettings&&(this.isRequireLoadDataSettings=!1,this.$refs.aboutSettingsRef.onRequest(),this.$refs.programSettingsRef.onRequest())}},methods:{updateHandler:function(t,e){this.$global.data.settings=Object.assign({},this.$global.data.settings,e),"settings"!==t||!e||e.email===this.$global.data.users.name&&e.password===this.$global.data.users.password||this.updateUserToken(e.email,e.password)},updateUserToken:function(t,e){var a=this;this.$jsonFetch.get("".concat(this.$global.data.baseUrl,"/jwt/sign?name=").concat(t,"&password=").concat(e)).then((function(i){var s=i.data.token;a.$jsonFetch.get("".concat(a.$global.data.baseUrl,"/__users"),void 0,{params:{name:t}}).then((function(i){i.data.length>0?a.$jsonFetch.patch("".concat(a.$global.data.baseUrl,"/__users/").concat(i.data[0].id),{name:t,type:"Bearer",token:s},{params:{uid:a.UID}}).then((function(t){a.$global.data.users={name:t.data.name,password:e}})).catch((function(t){})):a.$jsonFetch.post("".concat(a.$global.data.baseUrl,"/__users"),{name:t,type:"Bearer",token:s},{params:{uid:a.UID}}).then((function(t){a.$global.data.users={name:t.data.name,password:e}})).catch((function(t){}))})).catch((function(t){}))})).catch((function(t){}))}}},l=r,c=a("2877"),d=Object(c["a"])(l,i,s,!1,null,null,null);e["a"]=d.exports},fbb2:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("JsonTable",{ref:"salesRef",attrs:{"base-url":this.$global.data.baseUrl,params:{uid:t.UID},query:"_embed=saleProducts&_expand=customer&_expand=product&_expand=type&_expand=unit",table:"sales",title:"⭐ รายการขายสินค้า ⭐",classes:t.settings.classes,columns:t.saleColumns,onInitAddData:t.onInitAddDataSales,onValidateData:t.onValidateDataSales,onAfterLoadData:t.onAfterLoadDataSales,onBeforeUpdateData:t.onBeforeUpdateDataSales,onAfterRemoveData:t.onAfterRemoveDataSales,rowsPerPage:5,selected:t.selectedRows,showSelectedRows:"",autoSelectRow:""},on:{"update:selected":[function(e){t.selectedRows=e},t.onSelectedRows]}}),a("JsonTable",{ref:"saleProductsRef",attrs:{id:"scrollToThis","base-url":this.$global.data.baseUrl,params:{uid:t.UID},title:"⭐ "+t.titleSaleProducts+" ⭐",classes:t.settings.classes,columns:t.saleProductColumns,onInitAddData:t.onInitAddData,onInitEditData:t.onInitEditData,onValidateData:t.onValidateData,onAfterLoadData:t.onAfterLoadData,rowsPerPage:0,showEditDialog:t.showEditDialog,hidePagination:"",hideRefreshButton:""},on:{"add-row":function(e,a){return t.onUpdateRow(e,a,void 0)},"update-row":function(e,a){return t.onUpdateRow(e,a,{})},"update-cell":function(e,a,i){return t.onUpdateRow(e,a,i)},"remove-row":function(e,a){return t.onRemoveRow(e,a)},"input-select":function(e,a){return t.onInputSelect(e,a)}},model:{value:t.saleProducts,callback:function(e){t.saleProducts=e},expression:"saleProducts"}}),a("q-page-sticky",{staticClass:"z-top",attrs:{position:"top-left",offset:[0,0]}},[a("q-btn",{staticClass:"q-ma-xs",attrs:{"fab-mini":"",glossy:"",round:"",icon:"record_voice_over",color:t.speechColor,size:"xs"},on:{click:function(){return t.$speechApi.recognizing?t.$speechApi.abort():t.$speechApi.start()}}})],1),a("q-page-sticky",{staticClass:"z-top",attrs:{position:"top-right",offset:[0,0]}},[a("q-btn",{staticClass:"q-ma-xs",attrs:{"fab-mini":"",glossy:"",round:"",icon:"print",color:"accent",size:"xs",disable:!t.selectedRow.total||t.selectedRow.total<=0},on:{click:function(){return t.printData()}}})],1),a("div",{staticClass:"q-pa-none fit row wrap justify-center items-center content-start",attrs:{id:"print"}},[t.selectedRow.id?a("div",{staticClass:"q-pa-none row wrap justify-center items-start content-start",staticStyle:{width:"297px",border:"1px solid black"},attrs:{id:"printBorder"}},[a("div",{staticClass:"q-pa-sm text-bold"},[a("div",{staticClass:"q-pa-none",attrs:{align:"center"}},[a("img",{attrs:{src:t.images.logo,width:"150"}}),t.settings.address?a("div",[t._v("\n            "+t._s(t.settings.address)+"\n          ")]):t._e(),t.settings.telephone?a("div",[t._v("\n            โทรศัพท์: "+t._s(t.settings.telephone)+"\n          ")]):t._e(),a("div",{staticClass:"text-h6",staticStyle:{"text-decoration":"underline"}},[t._v("\n            บิลส่งสินค้า\n          ")]),t.selectedRow.date?a("div",{attrs:{align:"center"}},[t._v("\n            "+t._s(new Date(t.selectedRow.date).toLocaleString("th-TH",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))+"\n          ")]):t._e(),t.selectedRow.customer?a("div",{attrs:{align:"left"}},[t.selectedRow.customer.name?a("div",[t._v("\n              นาม: "+t._s(t.selectedRow.customer.name)+"\n            ")]):t._e(),t.selectedRow.customer.address?a("div",[t._v("\n              ที่อยู่: "+t._s(t.selectedRow.customer.address)+"\n            ")]):t._e(),t.selectedRow.customer.telephone?a("div",[t._v("\n              โทรศัพท์: "+t._s(t.selectedRow.customer.telephone)+"\n            ")]):t._e()]):t._e()]),a("div",{staticClass:"q-pa-none"},[t._m(0),t._l((t.$refs.saleProductsRef||{}).data,(function(e){return a("div",{key:e.id,staticClass:"row"},[a("div",{staticClass:"col-1 text-center"},[t._v(t._s(e.quantity)+"\n              ")]),a("div",{staticClass:"q-px-xs col"},[t._v(t._s((e.product||{}).name))]),a("div",{staticClass:"col-auto text-right"},[t._v(t._s(((+e.price||0)-(+e.discount||0)).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))]),a("div",{staticClass:"col-3 text-right"},[t._v(t._s((((+e.price||0)-(+e.discount||0))*(+e.quantity||0)).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])])}))],2),a("div",{staticClass:"q-pa-xs"}),a("div",{staticClass:"q-pa-none"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col text-right"},[t._v("รวม:")]),a("div",{staticClass:"col text-right"},[t._v(" "+t._s(((t.$refs.saleProductsRef||{}).data||[]).reduce((function(t,e){return t+e.quantity}),0)))]),a("div",{staticClass:"col"},[t._v(" หน่วย")])]),a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col text-right"},[t._v("จาก:")]),a("div",{staticClass:"col text-right"},[t._v(" "+t._s(((t.$refs.saleProductsRef||{}).data||[]).length))]),a("div",{staticClass:"col"},[t._v(" รายการ")])])]),a("div",{staticClass:"col-7"},[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("รวมเงิน:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "+t._s((+t.selectedRow.total||0).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])]),t.selectedRow.discount?a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("ส่วนลด:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "+t._s((+t.selectedRow.discount||0).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])]):t._e(),t.selectedRow.vat?a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("ภาษี:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "+t._s((((+t.selectedRow.total||0)-(+t.selectedRow.discount||0))*(+t.selectedRow.vat||0)/100).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])]):t._e(),a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("รวมสุทธิ:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "),a("span",{staticStyle:{"text-decoration":"underline"}},[t._v(t._s(((+t.selectedRow.total||0)-(+t.selectedRow.discount||0)+((+t.selectedRow.total||0)-(+t.selectedRow.discount||0))*(+t.selectedRow.vat||0)/100).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])])]),t.selectedRow.cash?a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("ชำระเงิน:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "+t._s((+t.selectedRow.cash||0).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])]):t._e(),t.selectedRow.cash?a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"col-5 text-right"},[t._v("ทอนเงิน:")]),a("div",{staticClass:"col-7 text-right"},[t._v(" "+t._s((+t.selectedRow.cash?+t.selectedRow.cash-((+t.selectedRow.total||0)-(+t.selectedRow.discount||0)+((+t.selectedRow.total||0)-(+t.selectedRow.discount||0))*(+t.selectedRow.vat||0)/100):0).toLocaleString(void 0,{minimumFractionDigits:t.settings.fractionDigits,maximumFractionDigits:t.settings.fractionDigits})))])]):t._e()])])]),t._m(1)])]):t._e()]),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.cashDialog,callback:function(e){t.cashDialog=e},expression:"cashDialog"}},[a("q-card",{style:t.dialogStyle},[a("q-card-section",{staticClass:"q-pa-none",staticStyle:{cursor:"grab","min-width":"500px"}},[a("q-bar",{directives:[{name:"touch-pan",rawName:"v-touch-pan.mouse",value:t.onPanDialog,expression:"onPanDialog",modifiers:{mouse:!0}}],staticClass:"bg-primary text-white"},[a("div",[t._v(t._s(t.titleSaleProducts))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1)],1),a("q-card-section",[a("div",{staticClass:"q-pa-md"},[a("q-input",{staticClass:"no-spin-button",attrs:{type:"number",autofocus:"",counter:"",debounce:"500",label:"ชำระเงิน","input-class":"text-right text-h3",rules:[function(t){return t>=0||"ข้อมูลต้องมีค่ามากกว่าหรือเท่ากับ 0"}]},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),function(){return t.cashValue>0&&t.selectedRow.id&&t.updateCashSales(t.selectedRow)}())},focus:function(t){return t&&t.target&&"function"===typeof t.target.select&&t.target.select()}},model:{value:t.cashValue,callback:function(e){t.cashValue=t._n(e)},expression:"cashValue"}}),a("q-input",{attrs:{value:(+t.selectedRow.net||0).toFixed(this.settings.fractionDigits),type:"text",readonly:"",label:"ราคาสุทธิ","input-class":"text-right text-h3"}}),a("q-input",{attrs:{value:(t.cashValue>(+t.selectedRow.net||0)?t.cashValue-(+t.selectedRow.net||0):0).toFixed(this.settings.fractionDigits),type:"text",readonly:"",label:"ทอนเงิน","input-class":"text-right text-h3"}})],1)]),a("q-card-section",[a("q-separator"),a("div",{staticClass:"q-pa-md q-gutter-md row justify-between"},[a("q-btn",{attrs:{glossy:"",color:"grey",label:"1000"},on:{click:function(e,a){return t.cashValueThrottle(1e3)}}}),a("q-btn",{attrs:{glossy:"",color:"purple",label:"500"},on:{click:function(e,a){return t.cashValueThrottle(500)}}}),a("q-btn",{attrs:{glossy:"",color:"red",label:"100"},on:{click:function(e,a){return t.cashValueThrottle(100)}}}),a("q-btn",{attrs:{glossy:"",color:"blue",label:"50"},on:{click:function(e,a){return t.cashValueThrottle(50)}}}),a("q-btn",{attrs:{glossy:"",color:"green",label:"20"},on:{click:function(e,a){return t.cashValueThrottle(20)}}})],1),a("q-separator"),a("div",{staticClass:"q-pa-md q-gutter-md row justify-between"},[a("q-btn",{attrs:{round:"",glossy:"",color:"yellow-10",label:"10"},on:{click:function(e,a){return t.cashValueThrottle(10)}}}),a("q-btn",{attrs:{round:"",glossy:"",color:"yellow-9",label:"5"},on:{click:function(e,a){return t.cashValueThrottle(5)}}}),a("q-btn",{attrs:{round:"",glossy:"",color:"yellow-8",label:"2"},on:{click:function(e,a){return t.cashValueThrottle(2)}}}),a("q-btn",{attrs:{round:"",glossy:"",color:"yellow-7",label:"1"},on:{click:function(e,a){return t.cashValueThrottle(1)}}})],1),a("q-separator")],1),a("q-card-actions",{staticClass:"q-pa-md",attrs:{align:"evenly"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"ย้อนกลับไป"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"secondary",label:"รับเงิน ไม่พิมพ์",disable:t.cashValue<=0||t.cashValue<(+t.selectedRow.net||0)},on:{click:function(e,a){return t.cashValue>0&&t.selectedRow.id&&t.updateCashSales(t.selectedRow,!1)}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"positive",label:"รับเงิน และพิมพ์",disable:t.cashValue<=0||t.cashValue<(+t.selectedRow.net||0)},on:{click:function(e,a){return t.cashValue>0&&t.selectedRow.id&&t.updateCashSales(t.selectedRow)}}})],1)],1)],1),a("q-dialog",{attrs:{"auto-close":"","transition-show":"scale","transition-hide":"scale"},model:{value:t.showProductSpeech,callback:function(e){t.showProductSpeech=e},expression:"showProductSpeech"}},[a("q-card",{style:t.dialogStyle},[a("q-card-section",{staticClass:"q-pa-none",staticStyle:{cursor:"grab","min-width":"500px"}},[a("q-bar",{directives:[{name:"touch-pan",rawName:"v-touch-pan.mouse",value:t.onPanDialog,expression:"onPanDialog",modifiers:{mouse:!0}}],staticClass:"bg-primary text-white"},[a("div",[t._v(t._s(t.titleSaleProducts))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}})],1)],1),a("q-card-section",[a("div",{staticClass:"q-pa-none",staticStyle:{"min-width":"350px"}},[a("q-list",{attrs:{bordered:"",separator:""}},t._l(t.speechProductRows,(function(e){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,attrs:{clickable:""},on:{click:function(){return t.addProductAutomate(e)}}},[a("q-item-section",{staticClass:"text-bold",staticStyle:{"font-size":"larger"}},[t._v("\n                "+t._s(e.name)+" ("+t._s(e.price)+" บาท ต่อ "+t._s(e.unit.name||"หน่วย")+")\n              ")])],1)})),1)],1)])],1)],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",staticStyle:{"text-decoration":"underline"}},[a("div",{staticClass:"col-1 text-center"},[t._v("จำนวน")]),a("div",{staticClass:"col text-center"},[t._v("รายการ")]),a("div",{staticClass:"col-auto text-right"},[t._v("ราคา")]),a("div",{staticClass:"col-3 text-right"},[t._v("รวม")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-none",attrs:{align:"center"}},[a("div",{staticClass:"text-h6"},[t._v("\n            ขอบคุณที่ใช้บริการ\n          ")])])}],n=(a("99af"),a("7db0"),a("4160"),a("caad"),a("e260"),a("13d5"),a("b0c0"),a("b680"),a("cca6"),a("d3b7"),a("e6cf"),a("ac1f"),a("2532"),a("3ca3"),a("1276"),a("498a"),a("159b"),a("ddb0"),a("ec67")),o=a("1732"),r=a("e302"),l={name:"PageSales",data:function(){return{saleColumns:[{name:"id",label:"รหัสขาย",field:"id",sortable:!0,edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"date",label:"วัน/เดือน/ปี เวลา",field:"date",format:function(t,e){return"".concat(new Date(t).toLocaleString())},sortable:!0,classes:"text-green-10 text-center",edit:{type:"datetime",inputClass:"",prefix:"",suffix:""}},{name:"customerId",label:"ลูกค้า",field:"customerId",sortable:!0,classes:"text-green-10 text-left",edit:{type:"number",inputClass:"",prefix:"",suffix:""}},{name:"discount",label:"ส่วนลด",field:"discount",sortable:!0,classes:"text-green-10",edit:{type:"decimal",inputClass:"",prefix:"",suffix:""}},{name:"vat",label:"ภาษี",field:"vat",sortable:!0,classes:"text-green-10",edit:{type:"number",inputClass:"",prefix:"",suffix:"%"}},{name:"total",label:"รวม",field:"total",sortable:!0,edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"net",label:"รวมสุทธิ",field:"net",sortable:!0,headerClasses:"text-weight-bold",classes:"text-weight-bold",edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"cash",label:"ชำระเงิน",field:"cash",sortable:!0,classes:"text-green-10",edit:{type:"decimal",inputClass:"",prefix:"",suffix:""}},{name:"change",label:"ทอนเงิน",field:"change",sortable:!0,edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],saleProductColumns:[{name:"product.id",label:"รหัสสินค้า",field:function(t){return(t.product||{}).id},sortable:!0,edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"product.type.name",label:"ประเภทสินค้า",field:function(t){return(t.product||{type:{}}).type.name},sortable:!0,classes:"text-center",edit:{type:"text",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"product.unit.name",label:"หน่วยนับ",field:function(t){return(t.product||{unit:{}}).unit.name},sortable:!0,classes:"text-center",edit:{type:"text",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"productId",label:"ชื่อสินค้า",field:"productId",sortable:!0,classes:"text-left",edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"cost",label:"ราคาทุน",field:function(t){return t.cost||(t.product||{}).cost||0},sortable:!0,edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"price",label:"ราคาขาย",field:"price",sortable:!0,edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"discount",label:"ส่วนลด",field:"discount",sortable:!0,classes:"text-green-10",edit:{type:"decimal",inputClass:"",prefix:"",suffix:""}},{name:"price.discount",label:"ราคา",field:function(t){return(t.price||0)-(t.discount||0)},sortable:!0,edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"quantity",label:"จำนวน",field:"quantity",sortable:!0,classes:"text-green-10",edit:{type:"number",inputClass:"",prefix:"",suffix:""}},{name:"total",label:"ราคารวม",field:function(t){return((t.price||0)-(t.discount||0))*(t.quantity||0)},sortable:!0,classes:"text-weight-bold",edit:{type:"decimal",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"product.quantity",label:"คงเหลือ",field:function(t){return(t.product||{}).quantity||0},sortable:!0,classes:"text-weight-bold",edit:{type:"number",readonly:!0,inputClass:"",prefix:"",suffix:""}},{name:"actions",label:"ดำเนินการ",field:"actions",sortable:!1,edit:{type:"actions",inputClass:"",prefix:"",suffix:""}}],titleSaleProducts:"ขายสินค้า",saleProducts:[],selectedRows:[],selectedRow:{},isRequireLoadDataSales:!1,isRequireLoadDataSaleProducts:!1,showEditDialog:!1,cashDialog:!1,cashValue:0,speechColor:"green",speechProductRows:[],showProductSpeech:!1,dialogPos:{x:0,y:0}}},components:{JsonTable:n["a"]},beforeCreate:function(){var t=this;this.UID=Object(o["a"])(),this.cashValueThrottle=Object(r["a"])((function(e){t.cashValue+=e}),500)},computed:{settings:{get:function(){return this.$global.data.settings||{}}},images:{get:function(){return this.$global.data.images||{}}},dialogStyle:function(){return{transform:"translate(".concat(this.dialogPos.x,"px, ").concat(this.dialogPos.y,"px)")}}},watch:{"$global.data.modify":function(t,e){if(t.request&&t.request.query&&t.request.query.uid!==this.UID){var a=t.request.path.split("/");(a.includes("sales")||a.includes("saleProducts")||a.includes("products"))&&(this.$global.data.panelModel===this.$options.name?this.$refs.salesRef.onRequest():this.isRequireLoadDataSales||(this.isRequireLoadDataSales=!0))}},"$global.data.panelModel":function(t,e){t===this.$options.name&&this.isRequireLoadDataSales&&(this.isRequireLoadDataSales=!1,this.$refs.salesRef.onRequest()),this.$speechApi.abort()}},mounted:function(){var t=this;void 0===this._keyListener.timeStamp&&(this._keyListener.timeStamp=0,window._keyListener||(window.addEventListener("keydown",this._keyListener),window._keyListener=this._keyListener)),this.$speechApi.onstart=function(){t.speechColor="red"},this.$speechApi.onend=function(){t.speechColor="green"},this.$speechApi.onresult=function(e){t.findProductSpeech(e)}},beforeDestroy:function(){void 0!==this._keyListener.timeStamp&&(window.removeEventListener("keydown",this._keyListener),delete window._keyListener)},methods:{onInitAddDataSales:function(t){t.date=(new Date).toISOString(),t.discount=0,t.vat=this.settings.vatSale,t.cash=0,t.customerId||(t.customerId=(this.selectedRow||{}).customerId?this.selectedRow.customerId:1)},onValidateDataSales:function(t,e,a){return"customerId"===e.name&&t<=0?"ยังไม่ได้กำหนดข้อมูลลูกค้า":"text"===e.edit.type||"textarea"===e.edit.type||"date"===e.edit.type?!!t||"ยังไม่ได้กำหนดข้อมูล":"number"!==e.edit.type&&"decimal"!==e.edit.type||(t>=0||"ข้อมูลต้องมีค่ามากกว่าหรือเท่ากับ 0")},onAfterLoadDataSales:function(t,e){e.forEach((function(t){t.net=((t.total||0)-(t.discount||0))*(100+(t.vat||0))/100,(t.total<=0||t.net<0)&&(t.net=0)})),document.activeElement.blur()},onBeforeUpdateDataSales:function(t,e){e.date=e.date||(new Date).toISOString(),e.change=e.cash-((e.total||0)-(e.discount||0))*(100+(e.vat||0))/100,delete e.net,(e.cash<=0||e.total<=0||e.change<0)&&(e.change=0)},onAfterRemoveDataSales:function(t,e,a){var i=this;a&&a.__deleted__&&a.__deleted__.saleProducts&&a.__deleted__.saleProducts.forEach((function(t){i.updateQuantityProduct({productId:t.productId,quantity:0,__:{quantity:t.quantity}})}))},onSelectedRows:function(t){t.length>0?(this.selectedRow=t[0],this.saleProducts=this.selectedRow.saleProducts,this.titleSaleProducts="ขายสินค้า ".concat((this.selectedRow.customer||{}).name," [").concat(this.selectedRow.id,"]")):(this.selectedRow={},this.saleProducts=[],this.titleSaleProducts="ขายสินค้า"),document.activeElement.blur()},onAfterLoadData:function(t,e){if(e.forEach((function(t){return t.__=Object.assign({},t.__,{quantity:t.quantity})})),this.onAfterLoadData.row){var a={product:this.onAfterLoadData.row,productId:this.onAfterLoadData.row.id};if(delete this.onAfterLoadData.row,this.onInitAddData(a))return;this.onUpdateRow("",a,{})}document.activeElement.blur()},onInitAddData:function(t){if(!this.selectedRow.id)return this.$q.notify({type:"warning",message:"ยังไม่ได้เลือกรายการขายสินค้า"}),this.showEditDialog=!1,!0;t.saleId=this.selectedRow.id,t.quantity=+this.settings.quantitySale,t.discount=0,t.cost=+((t.product||{}).cost||0),t.__=Object.assign({},t.__,{quantity:0})},onInitEditData:function(t){if(!this.selectedRow.id)return this.$q.notify({type:"warning",message:"ยังไม่ได้เลือกรายการขายสินค้า"}),this.showEditDialog=!1,!0;t.saleId=this.selectedRow.id,t.__=Object.assign({},t.__,{quantity:t.quantity})},onValidateData:function(t,e,a){return"productId"===e.name&&t<=0?"ยังไม่ได้กำหนดข้อมูลสินค้า":"quantity"===e.name?t<=0?"จำนวนสินค้าต้องมีค่ามากกว่า 0":!(a.product&&a.product.quantity-(t-a.__.quantity)<0)||(a.product.quantity<=0?(this.$q.notify({type:"negative",icon:"report_problem",caption:"คงเหลือ: ".concat(a.product.quantity," ").concat(a.product.unit.name),message:"สินค้า: ".concat(a.product.name," (สินค้าหมด)")}),"คงเหลือ: ".concat(a.product.quantity," ").concat(a.product.unit.name)):(this.$q.notify({type:"warning",icon:"report_problem",caption:"คงเหลือ: ".concat(a.product.quantity," ").concat(a.product.unit.name),message:"สินค้า: ".concat(a.product.name," (ไม่เพียงพอ)")}),"คงเหลือ: ".concat(a.product.quantity," ").concat(a.product.unit.name))):"text"===e.edit.type||"textarea"===e.edit.type||"date"===e.edit.type?!!t||"ยังไม่ได้กำหนดข้อมูล":"number"!==e.edit.type&&"decimal"!==e.edit.type||(t>=0||"ข้อมูลต้องมีค่ามากกว่าหรือเท่ากับ 0")},onUpdateRow:function(t,e,a){var i=this;if(e&&e.productId&&e.product){this.$q.loading.show(),e.cost=e.cost||(e.product||{}).cost||0;var s={saleId:e.saleId,productId:e.productId,price:e.product.price,discount:e.discount,cost:e.cost};if(!0!==this.onValidateData(e.quantity,{edit:{},name:"quantity"},e))return this.$q.loading.hide();var n=this.$refs.saleProductsRef.data.find((function(t){return t.productId===e.productId}));n?(Object.assign(s,{quantityDelta:a?e.quantity-e.__.quantity:e.quantity}),this.$jsonFetch.patch("".concat(this.$global.data.baseUrl,"/saleProducts/").concat(n.id),s,{params:{uid:this.UID}}).then((function(t){i.updateTotalSalesAndQuantityProduct(e).then((function(){i.$q.notify({type:"positive",message:"".concat((e.product||{}).name," ได้แก้ไขเรียบร้อยแล้ว")})})).catch((function(t){}))})).catch((function(t){}))):(Object.assign(s,{quantity:e.quantity}),this.$jsonFetch.post("".concat(this.$global.data.baseUrl,"/saleProducts"),s,{params:{uid:this.UID}}).then((function(t){i.updateTotalSalesAndQuantityProduct(e).then((function(){i.$q.notify({type:"positive",message:"".concat((e.product||{}).name," ได้เพิ่มเรียบร้อยแล้ว")})})).catch((function(t){}))})).catch((function(t){})))}},updateTotalSalesAndQuantityProduct:function(t){var e=this;return this.$refs.saleProductsRef.setShowEditDialog(!1),Promise.all([this.updateTotalSales(t),this.updateQuantityProduct(t)]).then((function(){return e.$refs.salesRef.onRequest()}))},updateTotalSales:function(t){var e=this;return new Promise((function(a,i){e.$jsonFetch.get("".concat(e.$global.data.baseUrl,"/saleProducts?saleId=").concat(t.saleId),{params:{uid:e.UID}}).then((function(s){var n={total:+s.data.reduce((function(t,e){return t+(e.price-e.discount)*e.quantity}),0).toFixed(e.settings.fractionDigits)};e.$jsonFetch.patch("".concat(e.$global.data.baseUrl,"/sales/").concat(t.saleId),n,{params:{uid:e.UID}}).then((function(t){a(t.data)})).catch((function(t){i(t)}))})).catch((function(t){i(t)}))}))},updateQuantityProduct:function(t){var e=this;return new Promise((function(a,i){var s={quantityDelta:+t.__.quantity-+t.quantity};e.$jsonFetch.patch("".concat(e.$global.data.baseUrl,"/products/").concat(t.productId),s,{params:{uid:e.UID}}).then((function(t){a(t.data)})).catch((function(t){i(t)}))}))},updateCashSales:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(i,s){e.$q.loading.show(),e.cashDialog=!1,t.cash=e.cashValue;var n={cash:t.cash,change:t.cash-((t.total||0)-(t.discount||0))*(100+(t.vat||0))/100};(t.cash<=0||t.total<=0||n.change<0)&&(n.change=0),e.$jsonFetch.patch("".concat(e.$global.data.baseUrl,"/sales/").concat(t.id),n,{params:{uid:e.UID}}).then((function(t){i(t.data),e.$refs.salesRef.onRequest(),a&&(e.printBorderVisibility(!1),e.$global.print("#print",e.settings.name,(function(){return e.printBorderVisibility(!0)})))})).catch((function(t){s(t)}))}))},onRemoveRow:function(t,e){var a=this;e&&e.id&&this.$q.dialog({title:"การลบข้อมูล",message:"กรุณายืนยันการลบข้อมูลของ ".concat(e.name||""," (รหัส ").concat(e.id,") ?"),ok:{glossy:!0,push:!0,color:"negative",label:"ยืนยันการลบ"},cancel:{glossy:!0,push:!0,color:"primary",label:"ยกเลิก"},focus:"cancel"}).onOk((function(){a.$q.loading.show(),e.quantity=0,a.$jsonFetch.delete("".concat(a.$global.data.baseUrl,"/saleProducts/").concat(e.id),void 0,{params:{uid:a.UID}}).then((function(t){a.updateTotalSalesAndQuantityProduct(e).then((function(){a.$q.notify({type:"positive",message:"".concat((e.product||{}).name," ได้ลบเรียบร้อยแล้ว")})})).catch((function(t){}))})).catch((function(t){}))}))},onInputSelect:function(t,e){"productId"===t.name&&("undefined"!==typeof e.sale&&(e.sale=e.product.price),this.$q.notify({type:"positive",icon:"info",caption:"สินค้า: ".concat(e.product.name),message:"ราคาขาย: ".concat(e.product.price," บาท/").concat(e.product.unit.name)}))},getDecimal:function(t){return(+t||0).toLocaleString(void 0,{minimumFractionDigits:this.settings.fractionDigits,maximumFractionDigits:this.settings.fractionDigits})},printData:function(){var t=this;this.selectedRow.cash?(this.printBorderVisibility(!1),this.$global.print("#print",this.settings.name,(function(){return t.printBorderVisibility(!0)}))):(this.cashDialog=!0,this.cashValue=this.selectedRow.net)},printBorderVisibility:function(t){document.getElementById("printBorder").style.borderColor=t?"black":"transparent"},_keyListener:function(t){if(this.$global.data.panelModel===this.$options.name){var e=document.activeElement.nodeName;if("BODY"!==e&&"INPUT"!==e&&document.activeElement.blur(),t.timeStamp-(this._keyListener.timeStamp||0)>2e3)"Enter"===t.key?(t.preventDefault(),t.stopPropagation(),this._keyListener.text=""):this._keyListener.text=t.key;else{if("Enter"===t.key){t.preventDefault(),t.stopPropagation();var a=this._keyListener.text.trim();return this._keyListener.text="",a&&"INPUT"!==t.target.nodeName&&this.findProductBarcode(a),!1}this._keyListener.text+=t.key}this._keyListener.timeStamp=t.timeStamp}},findProductBarcode:function(t){var e=this;this.$q.loading.show(),this.$jsonFetch.get("".concat(this.$global.data.baseUrl,"/products?_expand=type&_expand=unit&barcode=").concat(t),{params:{uid:this.UID}}).then((function(a){a.data&&a.data.length>0?e.addProductAutomate(a.data[0]):(e.$q.notify({type:"warning",message:"ไม่พบบาร์โค้ด ".concat(t)}),e.$q.loading.hide())})).catch((function(t){}))},findProductSpeech:function(t){var e=this;this.selectedRow.id?(this.$q.loading.show(),this.$jsonFetch.get("".concat(this.$global.data.baseUrl,"/products?_sort=name&_order=asc&_limit=10&_expand=*&name_like=").concat(t),{params:{uid:this.UID}}).then((function(a){a.data&&a.data.length>0?(e.speechProductRows=a.data,e.showProductSpeech=!0):e.$q.notify({type:"warning",message:"ไม่พบสินค้า ".concat(t)}),e.$q.loading.hide()})).catch((function(t){}))):this.$q.notify({type:"warning",message:"ยังไม่ได้เลือกรายการขายสินค้า"})},addProductAutomate:function(t){var e=this;this.onAfterLoadData.row=t,!this.selectedRow.id||this.selectedRow.cash?this.$refs.salesRef.data.length<=0||this.$refs.salesRef.data[0].cash?this.$refs.salesRef.updateRow(this.$refs.salesRef.addRow(!1)):(this.selectedRows=[this.$refs.salesRef.data[0]],this.$nextTick((function(){return e.onAfterLoadData(void 0,[])}))):this.onAfterLoadData(void 0,[])},onPanDialog:function(t){this.dialogPos={x:this.dialogPos.x+t.delta.x,y:this.dialogPos.y+t.delta.y}},_debug:function(){var t;(t=console).log.apply(t,arguments)}}},c=l,d=(a("3d07"),a("2877")),u=a("de5e"),p=a("9c40"),f=a("24e8"),h=a("f09f"),m=a("a370"),g=a("d847"),b=a("2c91"),y=a("27f9"),v=a("eb85"),x=a("4b7e"),w=a("1c1c"),q=a("66e5"),_=a("4074"),D=a("75c3"),C=a("7f67"),P=a("714f"),R=a("eebe"),S=a.n(R),$=Object(d["a"])(c,i,s,!1,null,"597e5293",null);e["a"]=$.exports;S()($,"components",{QPageSticky:u["a"],QBtn:p["a"],QDialog:f["a"],QCard:h["a"],QCardSection:m["a"],QBar:g["a"],QSpace:b["a"],QInput:y["a"],QSeparator:v["a"],QCardActions:x["a"],QList:w["a"],QItem:q["a"],QItemSection:_["a"]}),S()($,"directives",{TouchPan:D["a"],ClosePopup:C["a"],Ripple:P["a"]})},fbd9:function(t,e,a){}}]);